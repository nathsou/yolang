import{c as Q,a as _n,j as E,r as Ka,m as on,g as De,b as jt,d as v,z as Re,k as pt,e as kr,f as it,t as Ze,h as Ya,i as Fr,l as Vn,n as Nr,_ as w,s as Dr,o as Ha,p as Qa,q as Zt,u as Rr,v as Lr,w as pn,x as Wt,y as we,A as fn,B as ya,C as Ia,D as $r,E as Jt,F as xa,G as no,H as eo,I as to,J as ro,K as uo,L as ao,M as Cr,N as pe,O as q,P as ne,Q as y,R as oo,S as Ur,T as $n,U as io,V as Kt,W as Or,X as co,Y as Jn,Z as _o,$ as fo,a0 as ee,a1 as Mr,a2 as At,a3 as Xr,a4 as zr,a5 as so,a6 as St,a7 as lo,a8 as bt,a9 as vo,aa as To,ab as Go,ac as F,ad as go,ae as ho,af as Vr,ag as Yt,ah as mo,ai as J,aj as Eo,ak as ct,al as wo,am as Pr,an as Ht,ao as _t,ap as We,aq as po,ar as Br,as as Ao,at as ft,au as qr,av as So,aw as bo,ax as kt,ay as ko,az as Fo}from"./vendor.263d8ae4.js";const No=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))u(a);new MutationObserver(a=>{for(const t of a)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&u(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const t={};return a.integrity&&(t.integrity=a.integrity),a.referrerpolicy&&(t.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?t.credentials="include":a.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function u(a){if(a.ep)return;a.ep=!0;const t=r(a);fetch(a.href,t)}};No();function sn(n){var e=[],r=function(u){for(;;){var a=u,t=a&127,o=a>>>7;if(o!==0){e.push(t|128),u=o;continue}e.push(t);return}};return r(n),e}function jr(n){var e=[],r=function(u){for(;;){var a=u,t=a&127,o=a>>7;if(o===0&&(t&64)==0||o===-1&&(t&64)!=0){e.push(t);return}e.push(t|128),u=o}};return r(n|0),e}function st(n){return Q(sn(n.length),n)}function Pn(n){return Q(sn(n.length),_n(n))}var Do={encode:st,encodeMany:Pn};function Zr(n){var e=new DataView(new ArrayBuffer(4));return e.setFloat32(0,n,1),[e.getUint8(0),e.getUint8(1),e.getUint8(2),e.getUint8(3)]}var Ro={encode:Zr};function Wr(n){var e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,n,1),[e.getUint8(0),e.getUint8(1),e.getUint8(2),e.getUint8(3),e.getUint8(4),e.getUint8(5),e.getUint8(6),e.getUint8(7)]}var Lo={encode:Wr};function $o(n){return n}function te(n,e){return Q([n],st(e))}function re(n){var e;switch(n){case 0:e="custom";break;case 1:e="type";break;case 2:e="import";break;case 3:e="function";break;case 4:e="table";break;case 5:e="memory";break;case 6:e="global";break;case 7:e="export";break;case 8:e="start";break;case 9:e="element";break;case 10:e="code";break;case 11:e="data";break}return"["+e+"]"}var Co={id:$o,encode:te,show:re};function Je(n){switch(n){case 0:return 127;case 1:return 126;case 2:return 125;case 3:return 124}}function Ke(n){switch(n){case 0:return"i32";case 1:return"i64";case 2:return"f32";case 3:return"f64"}}var Uo={encode:Je,show:Ke};function Jr(n){return typeof n=="number"?[64]:n.TAG===0?[Je(n._0)]:sn(n._0)}function Oo(n){return typeof n=="number"?"void":n.TAG===0?Ke(n._0):"type "+String(n._0)}var Mo={encode:Jr,show:Oo};function Qt(n){if(typeof n=="number")switch(n){case 0:return[5,"else"];case 1:return[11,"end"];case 2:return[15,"return"];case 3:return[26,"drop"];case 4:return[106,"i32.add"];case 5:return[107,"i32.sub"];case 6:return[108,"i32.mul"];case 7:return[110,"i32.div_s"];case 8:return[109,"i32.div_u"];case 9:return[69,"i32.eqz"];case 10:return[70,"i32.eq"];case 11:return[81,"i64.eq"];case 12:return[91,"f32.eq"];case 13:return[97,"f64.eq"];case 14:return[71,"i32.ne"];case 15:return[82,"i64.ne"];case 16:return[92,"f32.ne"];case 17:return[98,"f64.ne"];case 18:return[76,"i32.le_s"];case 19:return[77,"i32.le_u"];case 20:return[87,"i64.le_s"];case 21:return[88,"i64.le_u"];case 22:return[95,"f32.le"];case 23:return[101,"f64.le"];case 24:return[78,"i32.ge_s"];case 25:return[79,"i32.ge_u"];case 26:return[89,"i64.ge_s"];case 27:return[90,"i64.ge_u"];case 28:return[96,"f32.ge"];case 29:return[102,"f64.ge"];case 30:return[72,"i32.lt_s"];case 31:return[73,"i32.lt_u"];case 32:return[83,"i64.lt_s"];case 33:return[84,"i64.lt_u"];case 34:return[93,"f32.lt"];case 35:return[99,"f64.lt"];case 36:return[74,"i32.gt_s"];case 37:return[75,"i32.gt_u"];case 38:return[85,"i64.gt_s"];case 39:return[86,"i64.gt_u"];case 40:return[94,"f32.gt"];case 41:return[100,"f64.gt"];case 42:return[111,"i32.rem_s"];case 43:return[112,"i32.rem_u"];case 44:return[113,"i32.and"];case 45:return[114,"i32.or"];case 46:return[116,"i32.shl"];case 47:return[117,"i32.shr_s"];case 48:return[118,"i32.shr_u"]}else switch(n.TAG|0){case 0:return[65,"i32.const "+String(n._0)];case 1:return[66,"i64.const "+String(n._0)];case 2:return[67,"i64.const "+String(n._0)];case 3:return[68,"i64.const "+String(n._0)];case 4:return[4,"if"];case 5:return[13,"br_if "+String(n._0)];case 6:return[12,"br "+String(n._0)];case 7:return[2,"block"];case 8:return[3,"loop"];case 9:return[35,"global.get "+String(n._0)];case 10:return[36,"global.set "+String(n._0)];case 11:return[32,"local.get "+String(n._0)];case 12:return[33,"local.set "+String(n._0)];case 13:return[34,"local.tee "+String(n._0)];case 14:return[16,"call "+String(n._0)];case 15:return[17,"call_indirect [typeIndex="+String(n._0)+", tableIndex="+String(n._1)+"]"];case 16:return[40,"i32.load (alignment="+String(n._0)+", offset="+String(n._1)+")"];case 17:return[54,"i32.store (alignment="+String(n._0)+", offset="+String(n._1)+")"]}}function ue(n){return Qt(n)[0]}function Kr(n){if(typeof n=="number")switch(n){case 0:case 1:return-1;default:return 0}else switch(n.TAG|0){case 4:case 7:case 8:return 1;default:return 0}}function Ft(n,e,r,u){var a=n!==void 0?n:{contents:0},t=Qt(e),o=Kr(e),i=E(Ka(0,a.contents+(o<0?o:0)|0),"  ",function(l){return""});a.contents=a.contents+o|0,e===0&&(a.contents=a.contents+1|0);var _,s=0;if(typeof e=="number")_="";else switch(e.TAG|0){case 11:case 12:case 13:s=1;break;case 14:_="<"+on(De(r,e._0),"??",function(l){return l})+">";break;default:_=""}return s===1&&(_="<"+on(De(u,e._0),"??",function(l){return l})+">"),i+t[1]+" "+_}function Ye(n){var e=0;if(typeof n=="number")return[ue(n)];switch(n.TAG|0){case 0:case 1:e=1;break;case 2:return Q([ue(n)],Zr(n._0));case 3:return Q([ue(n)],Wr(n._0));case 5:case 6:e=3;break;case 4:case 7:case 8:e=2;break;case 9:case 10:case 11:case 12:case 13:e=4;break;case 14:return Q([ue(n)],sn(n._0));case 15:return _n([[ue(n)],sn(n._0),sn(n._1)]);case 16:case 17:e=5;break}switch(e){case 1:return Q([ue(n)],jr(n._0));case 2:return Q([ue(n)],Jr(n._0));case 3:case 4:return Q([ue(n)],sn(n._0));case 5:return _n([[ue(n)],sn(n._0),sn(n._1)])}}var Xo={info:Qt,opcode:ue,identationDelta:Kr,show:Ft,encode:Ye};function zo(n,e){return{_0:n,_1:e}}var Vo=[],Po=[],Bo={_0:Vo,_1:Po};function Yr(n){return _n([[96],st(v(n._0,Je)),st(v(n._1,Je))])}function Hr(n){var e=n._1,r=n._0,u=E(r,", ",Ke),a=E(e,", ",Ke);if(r.length===1){var t=e.length;if(t===1)return u+" -> "+a;if(t===0)return u+" -> ()"}var o=e.length;return o!==1?o!==0?"("+u+") -> ("+a+")":"("+u+") -> ()":"("+u+") -> "+a}var qo={funcTypeCode:96,make:zo,empty:Bo,encode:Yr,show:Hr};function jo(n){var e=function(u,a){for(;;){var t=a,o=u;if(!o)return t;var i=o.tl,_=o.hd,s=_[1],l=_[0];if(t){var g=t.tl,d=t.hd,R=d[1],$=d[0];if(Vn(s,R)){a={hd:[{hd:l,tl:$},R],tl:g},u=i;continue}a={hd:[{hd:l,tl:0},s],tl:{hd:[$,R],tl:g}},u=i;continue}a={hd:[{hd:l,tl:0},s],tl:0},u=i}},r=kr(e(it(n),0));return Ze(Ya(r,function(u){return[Nr(Ze(u[0])),u[1]]}))}function Qr(n){return Q(sn(n[0].length),[Je(n[1])])}function yr(n){return"local ["+E(n[0],", ",function(e){return e})+"] "+Ke(n[1])}var Zo={fromTypes:jo,encode:Qr,show:yr};function Wo(n,e){return[n,e]}function Ir(n){var e=Pn(v(n[0],Qr)),r=_n(v(n[1],Ye));return _n([[e.length+r.length|0],e,r])}function xr(n,e,r){var u=n[0],a={contents:1},t=Fr(r._0,function(s,l){return"param["+String(s)+"]"}),o=Q(t,_n(v(u,function(s){return s[0]}))),i=E(u,`
`,yr),_=E(n[1],`
`,function(s){return Ft(a,s,e,o)});return u.length===0?_:i+`
`+_}var Jo={make:Wo,encode:Ir,show:xr};function Ko(n,e,r){return[n,e,r]}var lt={Signature:qo,Local:Zo,Body:Jo,make:Ko};function Yo(n){return[]}function yt(n,e){var r=jt(n,function(u){return Vn(u,e)});return r!==void 0?r:(n.push(e),n.length-1|0)}function nu(n){return te(1,Pn(v(n,Yr)))}function eu(n){return re(1)+`
`+E(n,`
`,Hr)}var Ho={make:Yo,getOrAdd:yt,encode:nu,show:eu};function Qo(n){return[]}function tu(n,e){return n.push(e),n.length-1|0}function ru(n){return te(3,Pn(v(n,sn)))}function uu(n,e){return re(3)+`
`+E(Re(n,e),`
`,function(r){return r[1]+": "+String(r[0])})}var yo={make:Qo,addSignature:tu,encode:ru,show:uu};function Nt(n){return st(v(n.split(""),function(e){return e.charCodeAt(0)|0}))}var Io={encode:Nt};function xo(n){return[n]}function au(n){switch(n){case 0:return"func";case 1:return"table";case 2:return"memory";case 3:return"global"}}var ni={encode:xo,show:au};function ei(n,e,r){return{name:n,kind:e,index:r}}function ou(n){return _n([Nt(n.name),[n.kind],sn(n.index)])}function iu(n){return"export "+au(n.kind)+" "+n.name+" (index: "+String(n.index)+")"}var ti={ExternalKind:ni,make:ei,encode:ou,show:iu};function ri(n){return[]}function ui(n,e){n.push(e)}function cu(n){return te(7,Pn(v(n,ou)))}function _u(n){return re(7)+`
`+E(n,`
`,iu)}var ai={make:ri,add:ui,encode:cu,show:_u};function oi(n){return n?"externref":"funcref"}function ii(n){return n?111:112}var ci={show:oi,encode:ii};function It(n){return"{ min: "+String(n[0])+", max: "+on(n[1],"?",function(e){return String(e)})+" }"}function _i(n,e){return[n,e]}function fi(n){return[n,n]}function Dt(n){var e=n[1],r=n[0];return e!==void 0?_n([[1],sn(r),sn(e)]):Q([0],sn(r))}var xt={show:It,make:_i,makeExact:fi,encode:Dt};function si(n,e){return[n,e]}function fu(n){return Q([n[0]?111:112],Dt(n[1]))}function su(n){return"table "+(n[0]?"externref":"funcref")+" "+It(n[1])}var lu={make:si,encode:fu,show:su};function li(n){return[]}function vi(n,e){n.push(e)}function vu(n){return re(4)+`
`+E(n,`
`,su)}function du(n){return te(4,Pn(v(n,fu)))}var di={make:li,add:vi,show:vu,encode:du};function Ti(n,e){var r=n!==void 0?n:0;return{offset:r,funcIndices:e}}function Tu(n){return"elem funcref ("+E(n.funcIndices," ",function(e){return String(e)})+") (offset="+String(n.offset)+")"}function Gu(n){return _n([[0],Ye({TAG:0,_0:n.offset}),Ye(1),Pn(v(n.funcIndices,sn))])}var gu={fromFuncRefs:Ti,show:Tu,encode:Gu};function Gi(n){return[]}function gi(n,e){n.push(e)}function hu(n){return re(9)+`
`+E(n,`
`,Tu)}function mu(n){return te(9,Pn(v(n,Gu)))}var hi={make:Gi,add:gi,show:hu,encode:mu};function mi(n){return n}function Eu(n){return Q(_n(v(n,Ye)),Ye(1))}function wu(n){if(n.length!==1)return`
`+E(n,`
`,function(r){return"  "+Ft(void 0,r,[],[])})+`
end`;var e=n[0];return Ft(void 0,e,[],[])}var Ei={fromInstructions:mi,encode:Eu,show:wu};function wi(n,e,r){return[e,n,r]}function pu(n){return"global "+(n[1]?"mutable":"immutable")+" "+Ke(n[0])+" = "+wu(n[2])}function Au(n){return Q([Je(n[0]),n[1]?1:0],Eu(n[2]))}var vt={Initializer:Ei,make:wi,show:pu,encode:Au};function pi(n){return[]}function Ai(n,e){n.push(e)}function Su(n){return re(6)+`
`+E(n,`
`,pu)}function bu(n){return te(6,Pn(v(n,Au)))}var Si={make:pi,add:Ai,show:Su,encode:bu};function bi(n){return n}function ku(n){return"memory "+It(n)}var Fu={make:bi,show:ku,encode:Dt};function ki(n){return[]}function Nu(n,e){return n.push(e)-1|0}function Du(n){return re(5)+`
`+E(n,`
`,ku)}function Ru(n){return te(5,Pn(v(n,Dt)))}var Fi={make:ki,add:Nu,show:Du,encode:Ru},Ni={};function Lu(n){return _n([[0],sn(n._0)])}function $u(n){return"func (index: "+String(n._0)+")"}var Di={make:void 0,encode:Lu,show:$u};function Cu(n){return _n([Nt(n.moduleName),Nt(n.entityName),Lu(n.desc)])}function Ri(n,e,r){return{moduleName:n,entityName:e,desc:r}}function Uu(n){return"import "+$u(n.desc)+" "+n.moduleName+"."+n.entityName}var Ou={ImportDesc:Di,encode:Cu,make:Ri,show:Uu};function Li(n){return[]}function Mu(n,e){return n.push(e)-1|0}function Xu(n){return te(2,Pn(v(n,Cu)))}function zu(n){return re(2)+`
`+E(n,`
`,Uu)}function $i(n){return n.length}var Ci={make:Li,add:Mu,encode:Xu,show:zu,count:$i};function Ui(n){return[]}function Vu(n,e){return n.push(e),n.length-1|0}function Pu(n){return te(10,Pn(v(n,Ir)))}function Bu(n,e,r){var u=v(pt(e,function(t){return!0}),function(t){return t.entityName}),a=Q(u,v(r,function(t){return t[0]}));return re(10)+`
`+E(Re(n,r),`

`,function(t){var o=t[1];return o[0]+`
`+xr(t[0],a,o[1])})}var Oi={make:Ui,addFunc:Vu,encode:Pu,show:Bu};function Mi(n){return{typeSection:[],importSection:[],funcSection:[],tableSection:[],memorySection:[],globalSection:[],exportSection:[],elementSection:[],codeSection:[],funcs:[]}}function Xi(n,e){return yt(n.typeSection,e)}function qu(n,e,r,u){var a=yt(n.typeSection,r);return tu(n.funcSection,a),n.funcs.push([e,r,u]),Vu(n.codeSection,u)+n.importSection.length|0}function zi(n,e,r,u){var a=qu(n,e,r,u),t={name:e,kind:0,index:a};return n.exportSection.push(t),a}function Vi(n,e){n.tableSection.push(e)}function Pi(n,e){n.elementSection.push(e)}function Bi(n,e){n.globalSection.push(e)}function qi(n,e){return Nu(n.memorySection,e)}function ji(n,e){return Mu(n.importSection,e)}function ju(n){return _n([[0,97,115,109,1,0,0,0],nu(n.typeSection),Xu(n.importSection),ru(n.funcSection),du(n.tableSection),Ru(n.memorySection),bu(n.globalSection),cu(n.exportSection),mu(n.elementSection),Pu(n.codeSection)])}function Zi(n){return(e=>Uint8Array.from(e))(ju(n))}function Wi(n){return E([eu(n.typeSection),zu(n.importSection),uu(n.funcSection,v(n.funcs,function(e){return e[0]})),vu(n.tableSection),Du(n.memorySection),Su(n.globalSection),_u(n.exportSection),hu(n.elementSection),Bu(n.codeSection,n.importSection,n.funcs)],`

`,function(e){return e})}var Bn={make:Mi,getOrAddSignature:Xi,addFunc:qu,addExportedFunc:zi,addTable:Vi,addElement:Pi,addGlobal:Bi,addMemory:qi,addImport:ji,encode:ju,encodeAsUint8Array:Zi,show:Wi},Ji=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",uleb128:sn,sleb128:jr,Vec:Do,F32:Ro,F64:Lo,Section:Co,ValueType:Uo,BlockReturnType:Mo,Inst:Xo,Func:lt,TypeSection:Ho,FuncSection:yo,Str:Io,ExportEntry:ti,ExportSection:ai,ReferenceType:ci,Limits:xt,Table:lu,TableSection:di,Elem:gu,ElementSection:hi,Global:vt,GlobalSection:Si,Memory:Fu,MemorySection:Fi,Import:Ni,ImportEntry:Ou,ImportSection:Ci,CodeSection:Oi,Module:Bn});const nr={Else:0,End:1,Return:2,Drop:3,AddI32:4,SubI32:5,MulI32:6,DivI32Unsigned:7,DivI32Signed:8,EqzI32:9,EqI32:10,EqI64:11,EqF32:12,EqF64:13,NeI32:14,NeI64:15,NeF32:16,NeF64:17,LeI32Signed:18,LeI32Unsigned:19,LeI64Signed:20,LeI64Unsigned:21,LeF32:22,LeF64:23,GeI32Signed:24,GeI32Unsigned:25,GeI64Signed:26,GeI64Unsigned:27,GeF32:28,GeF64:29,LtI32Signed:30,LtI32Unsigned:31,LtI64Signed:32,LtI64Unsigned:33,LtF32:34,LtF64:35,GtI32Signed:36,GtI32Unsigned:37,GtI64Signed:38,GtI64Unsigned:39,GtF32:40,GtF64:41,RemI32Signed:42,RemI32Unsigned:43,AndI32:44,OrI32:45,ShlI32:46,ShrI32Signed:47,ShrI32Unsigned:48},Zu={"0":"I32","1":"I64","2":"F32","3":"F64"},N={I32:0,I64:1,F32:2,F64:3},Ki={FuncRef:0,ExternRef:1},Yi={Func:0,Table:1,Memory:2,Global:3},se={Void:0},K=Ji;K.uleb128;K.sleb128;K.Vec.encode;K.Vec.encodeMany;K.F32.encode;K.F64.encode;K.Func.Signature.funcTypeCode;K.Func.Signature.empty._0.map(function(e){return Zu[e]}),K.Func.Signature.empty._1.map(function(e){return Zu[e]});K.FuncSection.make;K.FuncSection.encode;K.Str.encode;K.Limits.makeExact;K.Elem.show;K.Elem.encode;K.ElementSection.make;K.ElementSection.show;K.ElementSection.encode;K.MemorySection.make;K.ImportEntry.ImportDesc.make;const Hi=function(n){return K.Module.show({typeSection:n.typeSection.map(function(u){return{TAG:0,_0:u[0].map(function(t){return N[t]}),_1:u[1].map(function(t){return N[t]})}}),importSection:n.importSection.map(function(u){return{moduleName:u.moduleName,entityName:u.entityName,desc:{TAG:0,_0:u.desc.value}}}),funcSection:n.funcSection,tableSection:n.tableSection.map(function(u){return[Ki[u[0]],[u[1][0],u[1][1]==null?void 0:u[1][1]]]}),memorySection:n.memorySection.map(function(u){return[u[0],u[1]==null?void 0:u[1]]}),globalSection:n.globalSection.map(function(u){return[N[u[0]],u[1],u[2].map(function(t){return typeof t=="object"?t.tag==="ConstI32"?{TAG:0,_0:t.value}:t.tag==="ConstI64"?{TAG:1,_0:t.value}:t.tag==="ConstF32"?{TAG:2,_0:t.value}:t.tag==="ConstF64"?{TAG:3,_0:t.value}:t.tag==="If"?{TAG:4,_0:typeof t.value=="object"?t.value.tag==="TypeValue"?{TAG:0,_0:N[t.value.value]}:{TAG:1,_0:t.value.value[0],_1:[t.value.value[1][0].map(function(i){return N[i]}),t.value.value[1][1].map(function(i){return N[i]})]}:se[t.value]}:t.tag==="BranchIf"?{TAG:5,_0:t.value}:t.tag==="Branch"?{TAG:6,_0:t.value}:t.tag==="Block"?{TAG:7,_0:typeof t.value=="object"?t.value.tag==="TypeValue"?{TAG:0,_0:N[t.value.value]}:{TAG:1,_0:t.value.value[0],_1:[t.value.value[1][0].map(function(i){return N[i]}),t.value.value[1][1].map(function(i){return N[i]})]}:se[t.value]}:t.tag==="Loop"?{TAG:8,_0:typeof t.value=="object"?t.value.tag==="TypeValue"?{TAG:0,_0:N[t.value.value]}:{TAG:1,_0:t.value.value[0],_1:[t.value.value[1][0].map(function(i){return N[i]}),t.value.value[1][1].map(function(i){return N[i]})]}:se[t.value]}:t.tag==="GetGlobal"?{TAG:9,_0:t.value}:t.tag==="SetGlobal"?{TAG:10,_0:t.value}:t.tag==="GetLocal"?{TAG:11,_0:t.value}:t.tag==="SetLocal"?{TAG:12,_0:t.value}:t.tag==="TeeLocal"?{TAG:13,_0:t.value}:t.tag==="Call"?{TAG:14,_0:t.value}:t.tag==="CallIndirect"?{TAG:15,_0:t.value[0],_1:t.value[1]}:t.tag==="LoadI32"?{TAG:16,_0:t.value[0],_1:t.value[1]}:{TAG:17,_0:t.value[0],_1:t.value[1]}:nr[t]})]}),exportSection:n.exportSection.map(function(u){return{name:u.name,kind:Yi[u.kind],index:u.index}}),elementSection:n.elementSection,codeSection:n.codeSection.map(function(u){return[u[0].map(function(t){return[t[0],N[t[1]]]}),u[1].map(function(t){return typeof t=="object"?t.tag==="ConstI32"?{TAG:0,_0:t.value}:t.tag==="ConstI64"?{TAG:1,_0:t.value}:t.tag==="ConstF32"?{TAG:2,_0:t.value}:t.tag==="ConstF64"?{TAG:3,_0:t.value}:t.tag==="If"?{TAG:4,_0:typeof t.value=="object"?t.value.tag==="TypeValue"?{TAG:0,_0:N[t.value.value]}:{TAG:1,_0:t.value.value[0],_1:[t.value.value[1][0].map(function(i){return N[i]}),t.value.value[1][1].map(function(i){return N[i]})]}:se[t.value]}:t.tag==="BranchIf"?{TAG:5,_0:t.value}:t.tag==="Branch"?{TAG:6,_0:t.value}:t.tag==="Block"?{TAG:7,_0:typeof t.value=="object"?t.value.tag==="TypeValue"?{TAG:0,_0:N[t.value.value]}:{TAG:1,_0:t.value.value[0],_1:[t.value.value[1][0].map(function(i){return N[i]}),t.value.value[1][1].map(function(i){return N[i]})]}:se[t.value]}:t.tag==="Loop"?{TAG:8,_0:typeof t.value=="object"?t.value.tag==="TypeValue"?{TAG:0,_0:N[t.value.value]}:{TAG:1,_0:t.value.value[0],_1:[t.value.value[1][0].map(function(i){return N[i]}),t.value.value[1][1].map(function(i){return N[i]})]}:se[t.value]}:t.tag==="GetGlobal"?{TAG:9,_0:t.value}:t.tag==="SetGlobal"?{TAG:10,_0:t.value}:t.tag==="GetLocal"?{TAG:11,_0:t.value}:t.tag==="SetLocal"?{TAG:12,_0:t.value}:t.tag==="TeeLocal"?{TAG:13,_0:t.value}:t.tag==="Call"?{TAG:14,_0:t.value}:t.tag==="CallIndirect"?{TAG:15,_0:t.value[0],_1:t.value[1]}:t.tag==="LoadI32"?{TAG:16,_0:t.value[0],_1:t.value[1]}:{TAG:17,_0:t.value[0],_1:t.value[1]}:nr[t]})]}),funcs:n.funcs.map(function(u){return[u[0],{TAG:0,_0:u[1][0].map(function(t){return N[t]}),_1:u[1][1].map(function(t){return N[t]})},[u[2][0].map(function(t){return[t[0],N[t[1]]]}),u[2][1].map(function(t){return typeof t=="object"?t.tag==="ConstI32"?{TAG:0,_0:t.value}:t.tag==="ConstI64"?{TAG:1,_0:t.value}:t.tag==="ConstF32"?{TAG:2,_0:t.value}:t.tag==="ConstF64"?{TAG:3,_0:t.value}:t.tag==="If"?{TAG:4,_0:typeof t.value=="object"?t.value.tag==="TypeValue"?{TAG:0,_0:N[t.value.value]}:{TAG:1,_0:t.value.value[0],_1:[t.value.value[1][0].map(function(i){return N[i]}),t.value.value[1][1].map(function(i){return N[i]})]}:se[t.value]}:t.tag==="BranchIf"?{TAG:5,_0:t.value}:t.tag==="Branch"?{TAG:6,_0:t.value}:t.tag==="Block"?{TAG:7,_0:typeof t.value=="object"?t.value.tag==="TypeValue"?{TAG:0,_0:N[t.value.value]}:{TAG:1,_0:t.value.value[0],_1:[t.value.value[1][0].map(function(i){return N[i]}),t.value.value[1][1].map(function(i){return N[i]})]}:se[t.value]}:t.tag==="Loop"?{TAG:8,_0:typeof t.value=="object"?t.value.tag==="TypeValue"?{TAG:0,_0:N[t.value.value]}:{TAG:1,_0:t.value.value[0],_1:[t.value.value[1][0].map(function(i){return N[i]}),t.value.value[1][1].map(function(i){return N[i]})]}:se[t.value]}:t.tag==="GetGlobal"?{TAG:9,_0:t.value}:t.tag==="SetGlobal"?{TAG:10,_0:t.value}:t.tag==="GetLocal"?{TAG:11,_0:t.value}:t.tag==="SetLocal"?{TAG:12,_0:t.value}:t.tag==="TeeLocal"?{TAG:13,_0:t.value}:t.tag==="Call"?{TAG:14,_0:t.value}:t.tag==="CallIndirect"?{TAG:15,_0:t.value[0],_1:t.value[1]}:t.tag==="LoadI32"?{TAG:16,_0:t.value[0],_1:t.value[1]}:{TAG:17,_0:t.value[0],_1:t.value[1]}:nr[t]})]]})})};K.F32;K.F64;K.Vec;K.Str;function Qi(n,e,r){return w(e,w(n,r))}function He(n){return[[],n]}var yi=Dr;function Ii(n,e,r){return Dr(n,e,[[],r])}var xi=Ha,nc=Qa,ec=Zt;function tc(n,e){var r=E(Rr(Lr(n,e)),`
`,function(u){return"  "+u[0]+": "+u[1]});return`{
`+r+`
}`}var Cn={empty:void 0,add:yi,addMono:Ii,remove:xi,has:nc,get:ec,show:tc},rc=[],ae={TAG:1,_0:"u32",_1:rc},uc=[],Xn={TAG:1,_0:"bool",_1:uc},ac=[],Ae={TAG:1,_0:"()",_1:ac};function Dn(n,e){return{TAG:1,_0:"Fun",_1:Q(n,[e])}}function oc(n){return{TAG:1,_0:"Tuple",_1:n}}function ic(n){return{TAG:1,_0:"Ptr",_1:[n]}}function er(n){switch(n.TAG|0){case 0:case 1:return!1;case 2:return!0}}var Le=fn("Types.Size.UnkownTypeSize");function Rt(n){for(;;){var e=n;switch(e.TAG|0){case 0:throw{RE_EXN_ID:Le,_1:e,Error:new Error};case 1:switch(e._0){case"()":if(e._1.length===0)return 0;throw{RE_EXN_ID:Le,_1:e,Error:new Error};case"Mut":var r=e._1;if(r.length!==1)throw{RE_EXN_ID:Le,_1:e,Error:new Error};n=r[0];continue;case"Fun":case"Ptr":return 4;case"Tuple":return pn(v(e._1,Rt),0,function(u,a){return u+a|0});case"bool":case"u32":break;case"u64":if(e._1.length===0)return 8;throw{RE_EXN_ID:Le,_1:e,Error:new Error};default:throw{RE_EXN_ID:Le,_1:e,Error:new Error}}if(e._1.length===0)return 4;throw{RE_EXN_ID:Le,_1:e,Error:new Error};case 2:return 4}}}function cc(n){return Math.ceil(Math.log2(Rt(n)))|0}function _c(n){return Rt(n)===0}var oe={UnkownTypeSize:Le,size:Rt,sizeLog2:cc,isZeroSizedType:_c};function fc(n){return{TAG:0,_0:n}}function tr(n,e,r){if(n.TAG===0)return{TAG:1,_0:[e,r],_1:{TAG:0,_0:n._0}};var u=n._1,a=n._0,t=a[1],o=a[0];return e<o?{TAG:1,_0:[e,r],_1:{TAG:1,_0:[o,t],_1:u}}:{TAG:1,_0:[o,t],_1:tr(u,e,r)}}function sc(n){for(;;){var e=n;if(e.TAG===0)return e._0;n=e._1}}function lc(n,e){return pn(n,{TAG:0,_0:{TAG:0,_0:e}},function(r,u){return tr(r,u[0],u[1])})}function rr(n){var e=function(r,u){for(;;){var a=u,t=r;if(t.TAG===0){var o=t._0;switch(o.TAG|0){case 0:case 1:return a;case 2:var i=o._0;if(i.TAG===0)return a;var _=i._0;if(_.TAG===0)return a;u={hd:_._0,tl:a},r=_._1;continue}}else{u={hd:t._0,tl:a},r=t._1;continue}}};return Ze(e(n,0))}function vc(n){return ya(rr(n))}function Wu(n,e){if(n.TAG===0){var r=w(e,n._0);switch(r.TAG|0){case 0:case 1:return{TAG:0,_0:r};case 2:var u=r._0;return u.TAG===0?{TAG:0,_0:r}:u._0}}else{var a=n._0;return{TAG:1,_0:[a[0],w(e,a[1])],_1:Wu(n._1,e)}}}function Ju(n,e){var r=function(u,a){for(;;){var t=a,o=u;if(o.TAG===0)return Nr(Ze({hd:"..."+w(e,o._0),tl:t}));var i=o._0;a={hd:i[0]+": "+w(e,i[1]),tl:t},u=o._1}};return"{ "+E(r(n,0),", ",function(u){return u})+" }"}var zn={make:fc,insert:tr,tail:sc,fromArray:lc,toArray:rr,toMap:vc,map:Wu,show:Ju};function Lt(n){switch(n.TAG|0){case 0:return no(void 0,n._0);case 1:return pn(v(n._1,Lt),void 0,Jt);case 2:var e=n._0;return e.TAG===0?void 0:pn(v(rr(e._0),function(r){return Qi(function(u){return u[1]},Lt,r)}),void 0,Jt)}}function dc(n){return $r(Lt(n[1]),eo(n[0]))}function Tc(n){return pn(v(xa(n),dc),void 0,Jt)}function ur(n,e){var r=Ia($r(Lt(e),Tc(n)));return[r,e]}function Gc(n){var e=String.fromCharCode(97+n%26|0),r=n/26|0;return r===0?e:e+String(r)}function A(n){switch(n.TAG|0){case 0:return Gc(n._0);case 1:var e=n._1,r=n._0;if(e.length===0)return r;switch(r){case"Fun":var u=Wt(e,0,e.length-1|0),a=we(e,e.length-1|0);if(u.length!==1)return"("+E(u,", ",A)+") -> "+A(a);var t=u[0];return A(t)+" -> "+A(a);case"Tuple":return"("+E(e,", ",A)+")";default:return r+"<"+E(e,", ",A)+">"}case 2:var o=n._0;return o.TAG===0?o._0:Ju(o._0,A)}}function Ku(n){switch(n){case 0:return"+";case 1:return"-";case 2:return"*";case 3:return"/";case 4:return"%";case 5:return"<";case 6:return"<=";case 7:return">";case 8:return">=";case 9:return"==";case 10:return"!=";case 11:return"&&";case 12:return"||";case 13:return"&";case 14:return"|";case 15:return"<<";case 16:return">>"}}var gc={show:Ku};function Yu(n){switch(n){case 0:return"-";case 1:return"!";case 2:return"*"}}var hc={show:Yu};function Hu(n){return typeof n=="number"?"()":n.TAG===0?String(n._0):n._0?"true":"false"}var mc={show:Hu};function X(n){switch(n.TAG|0){case 0:return Hu(n._0);case 1:return Yu(n._0)+X(n._1);case 2:return"("+X(n._0)+" "+Ku(n._1)+" "+X(n._2)+")";case 3:return n._0;case 4:return X(n._0)+" = "+X(n._1);case 5:var e=n._1,r=n._0,u=r.length;if(u!==1)return u!==0?"("+E(r,", ",function(i){return i})+") -> "+X(e):"() -> "+X(e);var a=r[0];return a+" -> "+X(e);case 6:return"let "+n._0+" = "+X(n._1)+" in "+X(n._2);case 7:return"("+X(n._0)+")("+E(n._1,", ",X)+")";case 8:return(n._2===1?"unsafe ":"")+`{
`+E(Q(v(n._0,Qu),on(n._1,[],function(i){return[X(i)]})),`;
`,function(i){return"  "+i})+`
}`;case 9:var t=n._2,o="if "+X(n._0)+" "+X(n._1);return t!==void 0?o+" else "+X(t):o;case 10:return"while "+X(n._0)+" "+X(n._1);case 11:return"return "+on(n._0,"",X);case 12:return X(n._0)+" as "+A(n._1);case 13:return"("+E(n._0,", ",X)+")";case 14:return n._0+` {
`+E(n._1,", ",function(i){return i[0]+": "+X(i[1])})+`
}`;case 15:return X(n._0)+"."+n._1}}function ar(n){switch(n.TAG|0){case 0:return"fn "+n._0+"("+E(n._1,", ",function(e){return(e[1]?"mut ":"")+e[0]})+") "+X(n._2);case 1:return(n._1?"mut":"let")+" "+n._0+" = "+X(n._2);case 2:return"struct "+n._0+` {
`+E(n._1,`,
`,function(e){return(e[2]?"mut ":"")+e[0]+": "+A(e[1])})+`
}`;case 3:return"impl "+n._0+` {
`+E(n._1,`

`,ar)+`
}`;case 4:return"extern fn "+n.name+"("+E(n.args,", ",function(e){return(e[2]?"mut ":"")+e[0]+": "+A(e[1])})+") -> "+A(n.ret)}}function Qu(n){return n.TAG===0?(n._1?"mut":"let")+" "+n._0+" = "+X(n._2):X(n._0)}var Ec={showExpr:X,showDecl:ar,showStmt:Qu},wc={show:ar};function h(n,e){for(;;){var r=e;switch(r.TAG|0){case 0:var u=r._0,a=Cr(n,u);if(a===void 0)return{TAG:0,_0:u};e=a;continue;case 1:return{TAG:1,_0:r._0,_1:v(r._1,function(i){return h(n,i)})};case 2:var t=r._0,o;return o=t.TAG===0?{TAG:0,_0:t._0}:{TAG:1,_0:zn.map(t._0,function(i){return h(n,i)})},{TAG:2,_0:o}}}}function yu(n,e){var r=e[0];return[r,h(ao(n,r),e[1])]}function L(n,e){return to(ro(e,function(r){return h(n,r)}),n,function(r,u,a){return uo(a,u)})}function ln(n,e){return Lr(e,function(r){return yu(n,r)})}var Qe;function or(n,e){for(var r,u=0;pe(r)&&u<n.length;){var a=w(e,we(n,u));a!==void 0&&(r=q(ne(a))),u=u+1|0}return r}function Iu(n,e){for(var r,u=n.length-1|0;pe(r)&&u>=0;)w(e,we(n,u))?r=u:u=u-1|0;return r}function pc(n,e){for(var r=[],u=!1,a=0;u===!1&&a<n.length;){var t=we(n,a);t!==void 0?r.push(w(e,ne(t))):u=!0,a=a+1|0}if(!u)return r}function Ac(n,e){for(var r=[],u,a=0;pe(u)&&a<n.length;){var t=we(n,a);t.TAG===0?r.push(w(e,t._0)):u=q(t._0),a=a+1|0}var o=u;return o!==void 0?{TAG:1,_0:ne(o)}:{TAG:0,_0:r}}function xu(n,e){return y(jt(n,e),function(r){return[we(n,r),r]})}function Sc(n){return"struct "+n.name+`{
`+E(n.attributes,`,
`,function(e){return"  "+e.name+": "+A(e.ty)})+`
}`}function bc(n,e){return{TAG:2,_0:{TAG:1,_0:zn.fromArray(v(n.attributes,function(r){return[r.name,r.ty]}),e)}}}function kc(n,e){var r={contents:0},u=[];return $n(e,function(a){var t=a[1],o=oe.size(t);u.push({name:a[0],mut:a[2],offset:r.contents,ty:t,size:o,impl:void 0}),r.contents=r.contents+o|0}),{name:n,attributes:u,size:r.contents,staticFuncs:[]}}function Fc(n,e,r){n.attributes.push({name:e.contents.name,mut:!1,offset:0,ty:e.contents.ty,size:0,impl:[e,r]})}function Nc(n,e){n.staticFuncs.push({name:e})}var ye={show:Sc,toPartialStructType:bc,make:kc,addImplementation:Fc,addStaticFunc:Nc},qn={tyVarIndex:0,identifiers:[],renaming:oo(10),structs:Ur(5)};function le(n){var e=qn.tyVarIndex;return qn.tyVarIndex=qn.tyVarIndex+1|0,e}function ir(n){return{TAG:0,_0:le()}}function $t(n){var e=n[0],r=v(e,function(u){return{TAG:0,_0:le()}});return h(fo(Re(e,r)),n[1])}function Kn(n,e){var r=n!==void 0?ne(n):void 0,u=qn.identifiers.length;qn.identifiers.push(e);var a={contents:{name:e,newName:e,index:u,ty:r!==void 0?r:{TAG:0,_0:le()}}};return co(qn.renaming,u,a),a}function Dc(n){return Jn(Iu(qn.identifiers,function(e){return e===n}),function(e){return _o(qn.renaming,e)})}function na(n,e){e.contents.ty=h(n,e.contents.ty)}function ea(n){return $n(io(qn.renaming),function(e){return na(n,e)})}function Rc(n){return Kt(qn.structs,n.name,n)}function Yn(n){return Or(qn.structs,n)}function ve(n){switch(n.TAG|0){case 0:var e=n._0;return typeof e=="number"?Ae:e.TAG===0?ae:Xn;case 3:return n._0.contents.ty;case 4:case 11:return Ae;case 12:return on(n._0,Ae,ve);case 13:return n._2;case 14:return oc(v(n._0,ve));case 15:return{TAG:2,_0:{TAG:0,_0:n._0}};default:return n._0}}function Lc(n){return ve(n._0)}function z(n,e){var r=n!==void 0?ne(n):void 0,u=function(d,R){return r!==void 0?"("+R+": "+A(h(ne(r),d))+")":R},a=function(d){return z(q(r),d)};switch(e.TAG|0){case 0:return u(ve(e),mc.show(e._0));case 1:return u(e._0,"("+z(q(r),e._1)+" "+gc.show(e._2)+" "+z(q(r),e._3)+")");case 2:return u(e._0,"("+hc.show(e._1)+z(q(r),e._2)+")");case 3:var t=e._0;return u(t.contents.ty,t.contents.name);case 4:var o=e._1;return u(ve(o),z(q(r),e._0)+" = "+z(q(r),o));case 5:return u(e._0,"("+E(e._1,", ",function(d){return d.contents.name})+") -> "+z(q(r),e._2));case 6:return u(e._0,(e._1?"mut":"let")+" "+e._2.contents.name+" = "+z(q(r),e._3)+` in
`+z(q(r),e._4));case 7:return u(e._0,"let rec "+e._1.contents.name+" ("+E(e._2,", ",function(d){return d.contents.name})+") = "+z(q(r),e._3)+` in
`+z(q(r),e._4));case 8:return u(e._0,"("+z(q(r),e._1)+")("+E(e._2,", ",a)+")");case 9:var i=e._2,_=q(r);return u(e._0,(e._3===1?"unsafe ":"")+`{
`+E(Q(v(e._1,function(d){return ta(_,d)}),on(i,[],function(d){return[z(void 0,d)]})),`;
`,function(d){return"  "+d})+(pe(i)?"; ":"")+`
}`);case 10:return u(e._0,"if "+z(q(r),e._1)+" "+z(q(r),e._2)+" else "+z(q(r),e._3));case 11:return u(Ae,"while "+z(void 0,e._0)+" "+z(void 0,e._1));case 12:var s=q(r);return"return "+u(ve(e),on(e._0,"",function(d){return z(s,d)}));case 13:var l=e._0;return u(ve(l),z(void 0,l))+" as "+A(e._2);case 14:var g=q(r);return"("+E(e._0,", ",function(d){return z(g,d)})+")";case 15:return e._0+` {
`+E(e._1,`,
`,function(d){return d[0]+": "+z(void 0,d[1])})+`
}`;case 16:return u(e._0,z(void 0,e._1)+"."+e._2)}}function ta(n,e){var r=n!==void 0?ne(n):void 0;return z(q(r),e._0)}function cr(n,e){var r=n!==void 0?ne(n):void 0,u=function(s,l){return r!==void 0?"("+l+": "+A(h(ne(r),s))+")":l};switch(e.TAG|0){case 0:var a=e._1,t=e._0,o;if(r!==void 0){var i=ne(r);o=E(a,", ",function(s){var l=s[0];return(s[1]?"mut ":"")+(l.contents.name+": "+A(h(i,l.contents.ty)))})}else o=E(a,", ",function(s){return(s[1]?"mut ":"")+s[0].contents.name});return u(t.contents.ty,"fn "+t.contents.name+"("+o+") "+z(q(r),e._2));case 1:var _=e._0;return u(_.contents.ty,(e._1?"mut":"let")+" "+_.contents.name+" = "+z(q(r),e._2));case 2:return Ec.showDecl({TAG:2,_0:e._0,_1:e._1});case 3:return"impl "+e._0+` {
`+E(e._1,`

`,function(s){return cr(void 0,{TAG:0,_0:s[0],_1:s[1],_2:s[2]})})+`
}`;case 4:return"extern fn "+e.name.contents.name+"("+E(e.args,", ",function(s){var l=s[0];return(s[1]?"mut ":"")+l.contents.name+": "+A(l.contents.ty)})+") -> "+A(e.ret)}}var ra=fn("Core.CoreAst.UnexpectedDeclarationInImplBlock"),ua=fn("Core.CoreAst.UndeclaredIdentifer"),aa=fn("Core.CoreAst.UnreachableLetStmt");function _r(n,e,r,u,a){return r.TAG===5?{TAG:7,_0:r._0,_1:n,_2:r._1,_3:r._2,_4:u}:{TAG:6,_0:a,_1:e,_2:n,_3:r,_4:u}}function V(n){var e={LAZY_DONE:!1,VAL:function(){return ir()}};switch(n.TAG|0){case 0:return{TAG:0,_0:n._0};case 1:return{TAG:2,_0:ee(e),_1:n._0,_2:V(n._1)};case 2:return{TAG:1,_0:ee(e),_1:V(n._0),_2:n._1,_3:V(n._2)};case 3:var r=n._0,u=Dc(r);if(u!==void 0)return{TAG:3,_0:u};var a=Yn(r);if(a!==void 0)return{TAG:3,_0:Kn(void 0,r)};throw{RE_EXN_ID:ua,_1:r,Error:new Error};case 4:return{TAG:4,_0:V(n._0),_1:V(n._1)};case 5:var t=n._1,o=n._0;if(o.length===0)return{TAG:5,_0:ee(e),_1:[Kn(void 0,"__x")],_2:V(t)};var i=q(void 0);return{TAG:5,_0:ee(e),_1:v(o,function(g){return Kn(i,g)}),_2:V(t)};case 6:return _r(Kn(void 0,n._0),!1,V(n._1),V(n._2),ee(e));case 7:return{TAG:8,_0:ee(e),_1:V(n._0),_2:v(n._1,V)};case 8:var _=n._2,s=n._1,l=function(g){if(!g)return y(s,V);var d=g.hd;if(d.TAG!==0)return{TAG:9,_0:ee(e),_1:[oa(d)],_2:l(g.tl),_3:_};var R=d._3;return _r(Kn(void 0,d._0),d._1,V(d._2),on(l(g.tl),{TAG:0,_0:0},function($){return $}),R!==void 0?R:ir())};return{TAG:9,_0:ee(e),_1:[],_2:l(it(n._0)),_3:_};case 9:return{TAG:10,_0:ee(e),_1:V(n._0),_2:V(n._1),_3:on(n._2,{TAG:0,_0:0},V)};case 10:return{TAG:11,_0:V(n._0),_1:V(n._1)};case 11:return{TAG:12,_0:y(n._0,V)};case 12:return{TAG:13,_0:V(n._0),_1:ee(e),_2:n._1};case 13:return{TAG:14,_0:v(n._0,V)};case 14:return{TAG:15,_0:n._0,_1:v(n._1,function(g){return[g[0],V(g[1])]})};case 15:return{TAG:16,_0:ir(),_1:V(n._0),_2:n._1}}}function oa(n){if(n.TAG!==0)return{_0:V(n._0)};throw{RE_EXN_ID:aa,Error:new Error}}function fr(n){switch(n.TAG|0){case 0:var e=v(n._1,function(o){return[Kn(q(void 0),o[0]),o[1]]});return{TAG:0,_0:Kn(void 0,n._0),_1:e,_2:V(n._2)};case 1:return{TAG:1,_0:Kn(void 0,n._0),_1:n._1,_2:V(n._2)};case 2:var r=n._1,u=n._0;return Rc(ye.make(u,r)),{TAG:2,_0:u,_1:r};case 3:var a=v(v(n._1,fr),function(o){if(o.TAG===0)return[o._0,o._1,o._2];throw{RE_EXN_ID:ra,_1:o,Error:new Error}});return{TAG:3,_0:n._0,_1:a};case 4:var t=v(n.args,function(o){return[Kn(q(o[1]),o[0]),o[2]]});return{TAG:4,name:Kn(void 0,n.name),args:t,ret:n.ret}}}function Z(n,e){var r=function(i){return Z(n,i)};switch(e.TAG|0){case 0:return{TAG:0,_0:e._0};case 1:return{TAG:1,_0:h(n,e._0),_1:Z(n,e._1),_2:e._2,_3:Z(n,e._3)};case 2:return{TAG:2,_0:h(n,e._0),_1:e._1,_2:Z(n,e._2)};case 3:return{TAG:3,_0:e._0};case 4:return{TAG:4,_0:Z(n,e._0),_1:Z(n,e._1)};case 5:return{TAG:5,_0:h(n,e._0),_1:e._1,_2:Z(n,e._2)};case 6:return{TAG:6,_0:h(n,e._0),_1:e._1,_2:e._2,_3:Z(n,e._3),_4:Z(n,e._4)};case 7:return{TAG:7,_0:h(n,e._0),_1:e._1,_2:e._2,_3:Z(n,e._3),_4:Z(n,e._4)};case 8:return{TAG:8,_0:h(n,e._0),_1:Z(n,e._1),_2:v(e._2,r)};case 9:return{TAG:9,_0:h(n,e._0),_1:v(e._1,function(i){return ia(n,i)}),_2:y(e._2,r),_3:e._3};case 10:return{TAG:10,_0:h(n,e._0),_1:Z(n,e._1),_2:Z(n,e._2),_3:Z(n,e._3)};case 11:return{TAG:11,_0:Z(n,e._0),_1:Z(n,e._1)};case 12:return{TAG:12,_0:y(e._0,r)};case 13:return{TAG:13,_0:Z(n,e._0),_1:h(n,e._1),_2:h(n,e._2)};case 14:return{TAG:14,_0:v(e._0,r)};case 15:var u=e._1,a=e._0,t=Yn(a);if(t===void 0)return Mr('unreachable: undeclared struct "'+a+"'");var o=pc(v(pt(t.attributes,function(i){return pe(i.impl)}),function(i){var _=i.name;return At(u,function(s){return s[0]===_})}),function(i){return[i[0],Z(n,i[1])]});return o!==void 0?{TAG:15,_0:a,_1:o}:Mr('unreachable: missing attribute for struct "'+a+'"');case 16:return{TAG:16,_0:h(n,e._0),_1:Z(n,e._1),_2:e._2}}}function ia(n,e){return{_0:Z(n,e._0)}}function ca(n,e){switch(e.TAG|0){case 0:return{TAG:0,_0:e._0,_1:e._1,_2:Z(n,e._2)};case 1:return{TAG:1,_0:e._0,_1:e._1,_2:Z(n,e._2)};case 3:return{TAG:3,_0:e._0,_1:v(e._1,function(r){return[r[0],r[1],Z(n,r[2])]})};case 2:case 4:return e}}var gn={typeOfExpr:ve,typeOfStmt:Lc,showExpr:z,showStmt:ta,showDecl:cr,UnexpectedDeclarationInImplBlock:ra,UndeclaredIdentifer:ua,UnreachableLetStmt:aa,rewriteLetIn:_r,fromExpr:V,fromStmt:oa,fromDecl:fr,substExpr:Z,substStmt:ia,substDecl:ca},Rn={show:z,from:V,subst:Z,typeOf:ve},Se={show:cr,from:fr,subst:ca};function _a(n){return[n,0,n.length]}function $c(n){return _a(Array.from(n,function(e){return Xr(e,0)}))}function fa(n,e){var r=e[2],u=n!==void 0?n:1;return[e[0],Math.min(e[1]+u|0,r),r]}function sr(n){return De(n[0],n[1])}function lr(n){return fa(1,n)}function vr(n){return n[1]===n[2]}function Cc(n){return n[0].slice(n[1],n[2])}function Ie(n,e){var r=sr(e);if(r!==void 0&&w(n,r))return[r,fa(void 0,e)]}function I(n){return function(e){return Ie(function(r){return r===n},e)}}function sa(n){return n>=97?n<=122:!1}function Uc(n){return n>=65?n<=90:!1}function Oc(n){return sa(n)?!0:Uc(n)}function la(n){return n>=48?n<=57:!1}function Mc(n){return Oc(n)?!0:la(n)}function Xc(n){return Ie(sa,n)}function zc(n){return Ie(la,n)}function dr(n){return Ie(Mc,n)}function Vc(n){return n>13||n<9?n===32:!(n===12||n===11)}function Pc(n){return Ie(Vc,n)}function m(n,e,r){return y(w(n,r),function(u){return[w(e,u[0]),u[1]]})}function Ct(n,e,r){for(;;){var u=n,a=r,t=u!==void 0?u:[];if(vr(a))return[t,a];var o=w(e,a);if(o===void 0)return[t,a];t.push(o[0]),r=o[1],n=t}}function va(n){return Ct(void 0,Pc,n)}function dt(n,e,r){return Jn(w(n,r),function(u){var a=u[0];return y(w(e,u[1]),function(t){return[[a,t[0]],t[1]]})})}function da(n){return function(e){return m(function(r){return dt(n,function(u){return Ct(void 0,n,u)},r)},function(r){return Q([r[0]],r[1])},e)}}function Bc(n,e,r,u){return Jn(dt(n,e,u),function(a){var t=a[0],o=t[1],i=t[0];return y(w(r,a[1]),function(_){return[[i,o,_[0]],_[1]]})})}function Ta(n){if(!n)return function(a){return[0,a]};var e=n.hd,r=Ta(n.tl),u=function(a){return dt(e,r,a)};return function(a){return m(u,function(t){return{hd:t[0],tl:t[1]}},a)}}function Ga(n,e,r){var u=w(n,r);return u!==void 0?[u[0],u[1]]:w(e,r)}function Tt(n,e){return or(n,function(r){return w(r,e)})}function j(n){var e=Array.from(n,function(u){var a=Xr(u,0);return function(t){return Ie(function(o){return o===a},t)}}),r=Ta(it(e));return function(u){return m(r,function(a){return n},u)}}function qc(n,e){var r=w(n,e);if(r===void 0)return[void 0,lr(e)]}var jc=da(zc);function Zc(n){return m(jc,function(e){return{TAG:0,_0:zr(so(E(e,"",function(r){return St(1,r)})))}},n)}var Wc=j("false");function Jc(n){return m(Wc,function(e){return{TAG:1,_0:!1}},n)}var Kc=j("true");function Yc(n){return m(Kc,function(e){return{TAG:1,_0:!0}},n)}function Hc(n){return Ga(Yc,Jc,n)}var Qc=[dr,I(95),I(39)];function yc(n){return Tt(Qc,n)}function Ic(n){return Ct(void 0,yc,n)}var xc=I(95);function n0(n){return Ga(Xc,xc,n)}function e0(n){return dt(n0,Ic,n)}function t0(n){return m(e0,function(e){return{TAG:3,_0:St(1,e[0])+E(e[1],"",function(r){return St(1,r)})}},n)}var r0=[dr,I(95)],u0=da(function(n){return Tt(r0,n)});function a0(n){return m(u0,function(e){return{TAG:4,_0:E(e,"",function(r){return St(1,r)})}},n)}var o0=j("let"),i0=j("mut"),c0=j("in"),_0=j("if"),f0=j("else"),s0=j("fn"),l0=j("while"),v0=j("return"),d0=j("as"),T0=j("unsafe"),G0=j("struct"),g0=j("impl"),h0=j("extern"),m0=[function(n){return m(o0,function(e){return{TAG:5,_0:0}},n)},function(n){return m(i0,function(e){return{TAG:5,_0:1}},n)},function(n){return m(c0,function(e){return{TAG:5,_0:2}},n)},function(n){return m(_0,function(e){return{TAG:5,_0:3}},n)},function(n){return m(f0,function(e){return{TAG:5,_0:4}},n)},function(n){return m(s0,function(e){return{TAG:5,_0:5}},n)},function(n){return m(l0,function(e){return{TAG:5,_0:6}},n)},function(n){return m(v0,function(e){return{TAG:5,_0:7}},n)},function(n){return m(d0,function(e){return{TAG:5,_0:8}},n)},function(n){return m(T0,function(e){return{TAG:5,_0:9}},n)},function(n){return m(G0,function(e){return{TAG:5,_0:10}},n)},function(n){return m(g0,function(e){return{TAG:5,_0:11}},n)},function(n){return m(h0,function(e){return{TAG:5,_0:12}},n)}];function E0(n){return Tt(m0,n)}function w0(n){return dt(E0,function(e){return qc(dr,e)},n)}function p0(n){return m(w0,function(e){return e[0]},n)}var A0=j("->"),S0=j("=="),b0=j("!="),k0=j("&&"),F0=j("||"),N0=j("+="),D0=j("-="),R0=j("*="),L0=j("/="),$0=j("%="),C0=I(43),U0=I(45),O0=I(42),M0=I(47),X0=I(37),z0=j("<="),V0=j(">="),P0=I(60),B0=I(62),q0=I(40),j0=I(41),Z0=I(44),W0=I(59),J0=I(61),K0=I(123),Y0=I(125),H0=I(58),Q0=I(33),y0=I(46),I0=I(38),x0=I(124),n_=[function(n){return m(A0,function(e){return{TAG:2,_0:5}},n)},function(n){return m(S0,function(e){return{TAG:2,_0:14}},n)},function(n){return m(b0,function(e){return{TAG:2,_0:15}},n)},function(n){return m(k0,function(e){return{TAG:2,_0:23}},n)},function(n){return m(F0,function(e){return{TAG:2,_0:25}},n)},function(n){return m(N0,function(e){return{TAG:2,_0:26}},n)},function(n){return m(D0,function(e){return{TAG:2,_0:27}},n)},function(n){return m(R0,function(e){return{TAG:2,_0:28}},n)},function(n){return m(L0,function(e){return{TAG:2,_0:29}},n)},function(n){return m($0,function(e){return{TAG:2,_0:30}},n)},function(n){return m(C0,function(e){return{TAG:2,_0:9}},n)},function(n){return m(U0,function(e){return{TAG:2,_0:10}},n)},function(n){return m(O0,function(e){return{TAG:2,_0:11}},n)},function(n){return m(M0,function(e){return{TAG:2,_0:12}},n)},function(n){return m(X0,function(e){return{TAG:2,_0:13}},n)},function(n){return m(z0,function(e){return{TAG:2,_0:17}},n)},function(n){return m(V0,function(e){return{TAG:2,_0:19}},n)},function(n){return m(P0,function(e){return{TAG:2,_0:16}},n)},function(n){return m(B0,function(e){return{TAG:2,_0:18}},n)},function(n){return m(q0,function(e){return{TAG:2,_0:0}},n)},function(n){return m(j0,function(e){return{TAG:2,_0:1}},n)},function(n){return m(Z0,function(e){return{TAG:2,_0:2}},n)},function(n){return m(W0,function(e){return{TAG:2,_0:3}},n)},function(n){return m(J0,function(e){return{TAG:2,_0:4}},n)},function(n){return m(K0,function(e){return{TAG:2,_0:6}},n)},function(n){return m(Y0,function(e){return{TAG:2,_0:7}},n)},function(n){return m(H0,function(e){return{TAG:2,_0:8}},n)},function(n){return m(Q0,function(e){return{TAG:2,_0:20}},n)},function(n){return m(y0,function(e){return{TAG:2,_0:21}},n)},function(n){return m(I0,function(e){return{TAG:2,_0:22}},n)},function(n){return m(x0,function(e){return{TAG:2,_0:24}},n)}];function e_(n){return Tt(n_,n)}var t_=[Zc,Hc,p0,e_,t0,a0];function r_(n){return Tt(t_,n)}function u_(n){return Ct(void 0,function(e){return m(function(r){return Bc(va,r_,va,r)},function(r){return r[1]},e)},n)}function a_(n){switch(n){case 0:return"(";case 1:return")";case 2:return",";case 3:return";";case 4:return"=";case 5:return"->";case 6:return"{";case 7:return"}";case 8:return":";case 9:return"+";case 10:return"-";case 11:return"*";case 12:return"/";case 13:return"%";case 14:return"==";case 15:return"!=";case 16:return"<";case 17:return"<=";case 18:return">";case 19:return">=";case 20:return"!";case 21:return".";case 22:return"&";case 23:return"&&";case 24:return"|";case 25:return"||";case 26:return"+=";case 27:return"-=";case 28:return"*=";case 29:return"/=";case 30:return"%="}}function o_(n){switch(n){case 0:return"let";case 1:return"mut";case 2:return"in";case 3:return"if";case 4:return"else";case 5:return"fn";case 6:return"while";case 7:return"return";case 8:return"as";case 9:return"unsafe";case 10:return"struct";case 11:return"impl";case 12:return"extern"}}function i_(n){switch(n.TAG|0){case 0:return String(n._0);case 1:return n._0?"true":"false";case 2:return a_(n._0);case 3:case 4:return n._0;case 5:return o_(n._0)}}function Ut(n){return{contents:function(e){return Jn(sr(e),function(r){if(w(n,r))return[r,lr(e)]})}}}function xe(n){return{contents:function(e){return Jn(sr(e),function(r){return y(w(n,r),function(u){return[u,lr(e)]})})}}}function c_(n,e){return{contents:function(r){var u=w(n.contents,r);if(u!==void 0){var a=u[1];return y(w(e,u[0]),function(t){return[t,a]})}}}}function f(n){return Ut(function(e){return Vn(e,n)})}function G(n,e){return{contents:function(r){return y(w(n.contents,r),function(u){return[w(e,u[0]),u[1]]})}}}function an(n,e){return{contents:function(r){return Jn(w(n.contents,r),function(u){var a=u[0];return y(w(e.contents,u[1]),function(t){return[[a,t[0]],t[1]]})})}}}function Gt(n){var e=function(r){return{contents:function(u){if(vr(u))return[0,u];var a=w(r.contents,u);if(a===void 0)return[0,u];var t=a[0];return y(w(e(r).contents,a[1]),function(o){return[{hd:t,tl:o[0]},o[1]]})}}};return G(e(n),Ze)}function __(n){return G(an(n,Gt(n)),function(e){return Q([e[0]],e[1])})}function de(n,e,r){return{contents:function(u){return Jn(w(an(n,e).contents,u),function(a){var t=a[0],o=t[1],i=t[0];return y(w(r.contents,a[1]),function(_){return[[i,o,_[0]],_[1]]})})}}}function $e(n,e,r,u){return{contents:function(a){return Jn(w(de(n,e,r).contents,a),function(t){var o=t[0],i=o[2],_=o[1],s=o[0];return y(w(u.contents,t[1]),function(l){return[[s,_,i,l[0]],l[1]]})})}}}function gt(n,e,r,u,a){return{contents:function(t){return Jn(w($e(n,e,r,u).contents,t),function(o){var i=o[0],_=i[3],s=i[2],l=i[1],g=i[0];return y(w(a.contents,o[1]),function(d){return[[g,l,s,_,d[0]],d[1]]})})}}}function ga(n,e,r,u,a,t){return{contents:function(o){return Jn(w(gt(n,e,r,u,a).contents,o),function(i){var _=i[0],s=_[4],l=_[3],g=_[2],d=_[1],R=_[0];return y(w(t.contents,i[1]),function($){return[[R,d,g,l,s,$[0]],$[1]]})})}}}function f_(n,e,r,u,a,t,o){return{contents:function(i){return Jn(w(ga(n,e,r,u,a,t).contents,i),function(_){var s=_[0],l=s[5],g=s[4],d=s[3],R=s[2],$=s[1],x=s[0];return y(w(o.contents,_[1]),function(tn){return[[x,$,R,d,g,l,tn[0]],tn[1]]})})}}}function P(n,e){return{contents:function(r){var u=w(n.contents,r);return u!==void 0?[u[0],u[1]]:w(e.contents,r)}}}function Ce(n){return{contents:function(e){return or(n,function(r){return w(r.contents,e)})}}}function ha(n,e,r){return G(an(n,Gt(e)),function(u){var a=u[1],t=u[0];return Vn(a,[])?t:pn(a,t,r)})}function Ue(n,e,r){return ha(n,an(e,n),function(u,a){return lo(r,u,a[0],a[1])})}function be(n){return G(de(Ut(function(e){return Vn(e,{TAG:2,_0:0})}),n,Ut(function(e){return Vn(e,{TAG:2,_0:1})})),function(e){return e[1]})}function s_(n,e){var r=function(u,a){var t=w(n.contents,u);if(t===void 0)return[a,u];var o=t[1];return a.push(t[0]),on(w(e.contents,o),[a,o],function(i){return r(i[1],a)})};return{contents:function(u){return r(u,[])}}}function Te(n){return s_(n,Ut(function(e){return Vn(e,{TAG:2,_0:2})}))}function ie(n){return P(G(n,function(e){return q(e)}),{contents:function(e){return[void 0,e]}})}var ma=an,Ea={contents:function(n){}},vn={contents:function(n){}},nt={contents:function(n){}},wa={contents:function(n){}},ce={contents:function(n){}},l_=xe(function(n){if(n.TAG===0)return{TAG:0,_0:{TAG:0,_0:n._0}}}),v_=xe(function(n){if(n.TAG===1)return{TAG:0,_0:{TAG:1,_0:n._0}}}),Hn=xe(function(n){if(n.TAG===3)return n._0}),Ot=xe(function(n){if(n.TAG===4)return n._0}),Tr=xe(function(n){switch(n.TAG|0){case 3:case 4:return n._0;default:return}}),d_=G(an(f({TAG:2,_0:0}),f({TAG:2,_0:1})),function(n){return Ae}),T_=P(d_,xe(function(n){switch(n.TAG|0){case 3:switch(n._0){case"bool":return Xn;case"u32":return ae;default:return}case 4:return{TAG:2,_0:{TAG:0,_0:n._0}};default:return}})),pa=P(T_,be(ce)),G_=P(G(de(P(be(Te(ce)),G(pa,function(n){return[n]})),f({TAG:2,_0:5}),ce),function(n){return Dn(n[0],n[2])}),pa),g_=P(G($e(Ot,f({TAG:2,_0:16}),Te(ce),f({TAG:2,_0:18})),function(n){return{TAG:1,_0:n[0],_1:n[2]}}),G_);ce.contents=g_.contents;var h_=G(an(Tr,ie(an(f({TAG:2,_0:8}),ce))),function(n){return[n[0],y(n[1],function(e){return e[1]})]}),m_=G(P(Hn,Tr),function(n){return{TAG:3,_0:n}}),E_=G(an(f({TAG:2,_0:0}),f({TAG:2,_0:1})),function(n){return{TAG:0,_0:0}}),w_=G(be($e(vn,f({TAG:2,_0:2}),vn,ie(an(f({TAG:2,_0:2}),Te(vn))))),function(n){var e=Q([n[0],n[2]],on(n[3],[],function(r){return r[1]}));return{TAG:13,_0:e}}),Aa=Ce([l_,v_,E_,m_,w_,be(vn)]),Sa=P(ha(Aa,an(f({TAG:2,_0:21}),Hn),function(n,e){return{TAG:15,_0:n,_1:e[1]}}),Aa),ba=P(G(an(Sa,__(be(Te(vn)))),function(n){return pn(n[1],n[0],function(e,r){return{TAG:7,_0:e,_1:r}})}),Sa),p_=Ce([G(f({TAG:2,_0:11}),function(n){return 2}),G(f({TAG:2,_0:10}),function(n){return 0}),G(f({TAG:2,_0:20}),function(n){return 1})]),A_=P(G(f({TAG:2,_0:9}),function(n){return 0}),G(f({TAG:2,_0:10}),function(n){return 1})),S_=Ce([G(f({TAG:2,_0:11}),function(n){return 2}),G(f({TAG:2,_0:12}),function(n){return 3}),G(f({TAG:2,_0:13}),function(n){return 4})]),b_=Ce([G(f({TAG:2,_0:23}),function(n){return 11}),G(f({TAG:2,_0:25}),function(n){return 12})]),k_=Ce([G(f({TAG:2,_0:22}),function(n){return 13}),G(f({TAG:2,_0:24}),function(n){return 14}),G(ma(f({TAG:2,_0:16}),f({TAG:2,_0:16})),function(n){return 15}),G(ma(f({TAG:2,_0:18}),f({TAG:2,_0:18})),function(n){return 16})]),F_=Ce([G(f({TAG:2,_0:16}),function(n){return 5}),G(f({TAG:2,_0:17}),function(n){return 6}),G(f({TAG:2,_0:18}),function(n){return 7}),G(f({TAG:2,_0:19}),function(n){return 8})]),N_=P(G(f({TAG:2,_0:14}),function(n){return 9}),G(f({TAG:2,_0:15}),function(n){return 10})),D_=P(G(an(p_,ba),function(n){return{TAG:1,_0:n[0],_1:n[1]}}),ba),R_=Ue(D_,S_,function(n,e,r){return{TAG:2,_0:n,_1:e,_2:r}}),L_=Ue(R_,A_,function(n,e,r){return{TAG:2,_0:n,_1:e,_2:r}}),$_=Ue(L_,b_,function(n,e,r){return{TAG:2,_0:n,_1:e,_2:r}}),C_=Ue($_,k_,function(n,e,r){return{TAG:2,_0:n,_1:e,_2:r}}),U_=Ue(C_,F_,function(n,e,r){return{TAG:2,_0:n,_1:e,_2:r}}),O_=Ue(U_,N_,function(n,e,r){return{TAG:2,_0:n,_1:e,_2:r}}),M_=P(G($e(f({TAG:5,_0:3}),vn,nt,ie(an(f({TAG:5,_0:4}),nt))),function(n){return{TAG:9,_0:n[1],_1:n[2],_2:y(n[3],function(e){return e[1]})}}),O_),X_=P(G(de(f({TAG:5,_0:6}),vn,nt),function(n){return{TAG:10,_0:n[1],_1:n[2]}}),M_),z_=P(G(ga(f({TAG:5,_0:0}),Hn,f({TAG:2,_0:4}),vn,f({TAG:5,_0:2}),vn),function(n){return{TAG:6,_0:n[1],_1:n[3],_2:n[5]}}),X_),V_=P(be(Te(Hn)),G(Hn,function(n){return[n]})),P_=P(G(de(V_,f({TAG:2,_0:5}),vn),function(n){return{TAG:5,_0:n[0],_1:n[2]}}),z_),B_=c_(vn,function(n){switch(n.TAG|0){case 9:case 10:return[!0,{TAG:1,_0:n}];default:return}});nt.contents=P(G(gt(ie(f({TAG:5,_0:9})),f({TAG:2,_0:6}),Gt(P(G(wa,function(n){return[!1,n]}),B_)),ie(vn),f({TAG:2,_0:7})),function(n){var e=n[3],r=n[2],u=v(r,function(i){return i[1]}),a=on(n[0],0,function(i){return 1}),t=De(r,r.length-1|0);if(t===void 0)return{TAG:8,_0:u,_1:e,_2:a};var o=t[1];return o.TAG===0||!(t[0]&&pe(e))?{TAG:8,_0:u,_1:e,_2:a}:{TAG:8,_0:Wt(u,0,r.length-1|0),_1:o._0,_2:a}}),P_).contents;var q_=P(G($e(Ot,f({TAG:2,_0:6}),Te(de(Hn,f({TAG:2,_0:8}),vn)),f({TAG:2,_0:7})),function(n){return{TAG:14,_0:n[0],_1:v(n[2],function(e){return[e[0],e[2]]})}}),nt),j_=Ce([G(f({TAG:2,_0:4}),function(n){return"eq"}),G(f({TAG:2,_0:26}),function(n){return"plusEq"}),G(f({TAG:2,_0:27}),function(n){return"minusEq"}),G(f({TAG:2,_0:28}),function(n){return"starEq"}),G(f({TAG:2,_0:29}),function(n){return"divEq"}),G(f({TAG:2,_0:30}),function(n){return"modEq"})]),Z_=Ue(q_,j_,function(n,e,r){return e==="minusEq"?{TAG:4,_0:n,_1:{TAG:2,_0:n,_1:1,_2:r}}:e==="divEq"?{TAG:4,_0:n,_1:{TAG:2,_0:n,_1:3,_2:r}}:e==="eq"?{TAG:4,_0:n,_1:r}:e==="starEq"?{TAG:4,_0:n,_1:{TAG:2,_0:n,_1:2,_2:r}}:e==="modEq"?{TAG:4,_0:n,_1:{TAG:2,_0:n,_1:4,_2:r}}:{TAG:4,_0:n,_1:{TAG:2,_0:n,_1:0,_2:r}}}),W_=P(G(an(f({TAG:5,_0:7}),ie(vn)),function(n){return{TAG:11,_0:n[1]}}),Z_),J_=G(an(W_,ie(an(f({TAG:5,_0:8}),ce))),function(n){var e=n[1],r=n[0];return e!==void 0?{TAG:12,_0:r,_1:e[1]}:r});vn.contents=J_.contents;var K_=G(an(vn,f({TAG:2,_0:3})),function(n){return{TAG:1,_0:n[0]}}),Y_=P(G(gt(P(f({TAG:5,_0:0}),f({TAG:5,_0:1})),h_,f({TAG:2,_0:4}),vn,f({TAG:2,_0:3})),function(n){var e=n[1];return{TAG:0,_0:e[0],_1:Vn(n[0],{TAG:5,_0:1}),_2:n[3],_3:e[1]}}),K_);wa.contents=Y_.contents;var H_=G(gt(P(f({TAG:5,_0:0}),f({TAG:5,_0:1})),Tr,f({TAG:2,_0:4}),vn,f({TAG:2,_0:3})),function(n){return{TAG:1,_0:n[1],_1:Vn(n[0],{TAG:5,_0:1}),_2:n[3]}}),Q_=P(G(gt(f({TAG:5,_0:10}),Ot,f({TAG:2,_0:6}),Te(de(an(ie(f({TAG:5,_0:1})),Hn),f({TAG:2,_0:8}),ce)),f({TAG:2,_0:7})),function(n){var e=v(n[3],function(r){var u=r[0];return[u[1],r[2],bt(u[0])]});return{TAG:2,_0:n[1],_1:e}}),H_),ka=P(G($e(f({TAG:5,_0:5}),Hn,G(be(Te(an(ie(f({TAG:5,_0:1})),Hn))),function(n){return v(n,function(e){return[e[1],bt(e[0])]})}),nt),function(n){return{TAG:0,_0:n[1],_1:n[2],_2:n[3]}}),Q_),y_=P(G(f_(f({TAG:5,_0:12}),f({TAG:5,_0:5}),Hn,be(G(Te($e(ie(f({TAG:5,_0:1})),Hn,f({TAG:2,_0:8}),ce)),function(n){return v(n,function(e){return[e[1],e[3],bt(e[0])]})})),f({TAG:2,_0:5}),ce,f({TAG:2,_0:3})),function(n){return{TAG:4,name:n[2],args:n[3],ret:n[5]}}),ka),I_=P(G(de(f({TAG:5,_0:11}),Ot,G(de(f({TAG:2,_0:6}),Gt(ka),f({TAG:2,_0:7})),function(n){return n[1]})),function(n){return{TAG:3,_0:n[1],_1:n[2]}}),y_);Ea.contents=I_.contents;var x_=Gt(Ea);function Mt(n){var e=n.replace(/(\/\/[^\n]*)/g,""),r=u_($c(e));if(r===void 0)return{TAG:1,_0:"could not tokenize"};var u=w(x_.contents,_a(r[0]));if(u===void 0)return{TAG:1,_0:"could not parse"};var a=u[1];if(vr(a))return{TAG:0,_0:u[0]};var t=E(Wt(Cc(a),0,5)," ",i_);return{TAG:1,_0:"could not parse near "+t}}function nf(n,e){var r=n!==void 0?n:3,u={contents:e.length},a=function(t,o,i){for(;;){var _=i,s=o,l=t;if(l){var g=l.hd,d=0;if(typeof g=="number")switch(g){case 2:var R=l.tl;if(R&&R.hd===3){t={hd:2,tl:R.tl};continue}break;case 9:var $=l.tl;if($&&$.hd===9){t=$.tl;continue}break;case 10:var x=l.tl;if(x&&x.hd===9){t={hd:14,tl:x.tl};continue}break;case 14:var tn=l.tl;if(tn&&tn.hd===9){t={hd:10,tl:tn.tl};continue}break;case 18:var dn=l.tl;if(dn&&dn.hd===9){t={hd:36,tl:dn.tl};continue}break;case 19:var Sn=l.tl;if(Sn&&Sn.hd===9){t={hd:37,tl:Sn.tl};continue}break;case 24:var Tn=l.tl;if(Tn&&Tn.hd===9){t={hd:30,tl:Tn.tl};continue}break;case 25:var hn=l.tl;if(hn&&hn.hd===9){t={hd:31,tl:hn.tl};continue}break;case 30:var mn=l.tl;if(mn&&mn.hd===9){t={hd:24,tl:mn.tl};continue}break;case 31:var Gn=l.tl;if(Gn&&Gn.hd===9){t={hd:25,tl:Gn.tl};continue}break;case 36:var cn=l.tl;if(cn&&cn.hd===9){t={hd:18,tl:cn.tl};continue}break;case 37:var nn=l.tl;if(nn&&nn.hd===9){t={hd:19,tl:nn.tl};continue}break}else switch(g.TAG|0){case 0:var B=g._0,On=0,bn=l.tl;if(bn){var En=bn.hd;if(typeof En=="number"){if(En===3){t=bn.tl;continue}On=3}else switch(En.TAG|0){case 0:var en=bn.tl;if(en){var kn=en.hd;if(typeof kn=="number"){var Mn=En._0;if(kn!==43){if(kn<15)switch(kn){case 4:t={hd:{TAG:0,_0:B+Mn|0},tl:en.tl};continue;case 5:t={hd:{TAG:0,_0:B-Mn|0},tl:en.tl};continue;case 6:t={hd:{TAG:0,_0:Math.imul(B,Mn)},tl:en.tl};continue;case 7:t={hd:{TAG:0,_0:vo(B,Mn)},tl:en.tl};continue;case 10:t={hd:{TAG:0,_0:B===Mn?1:0},tl:en.tl};continue;case 0:case 1:case 2:case 3:case 8:case 9:case 11:case 12:case 13:break;case 14:t={hd:{TAG:0,_0:B===Mn?0:1},tl:en.tl};continue}}else{t={hd:{TAG:0,_0:To(B,Mn)},tl:en.tl};continue}}}break;case 15:t={hd:{TAG:14,_0:B},tl:bn.tl};continue;default:On=3}}if(On===3&&B===0){var _e=l.tl;if(_e.hd===10){t={hd:9,tl:_e.tl};continue}}break;case 1:case 2:case 3:case 9:case 11:d=2;break;case 12:var yn=l.tl;if(yn){var jn=yn.hd;if(typeof jn!="number"&&jn.TAG===11){var Xe=g._0;if(Xe===jn._0){t={hd:{TAG:13,_0:Xe},tl:yn.tl};continue}}}break;case 13:var Zn=l.tl;if(Zn&&Zn.hd===3){t={hd:{TAG:12,_0:g._0},tl:Zn.tl};continue}break}if(d===2){var In=l.tl;if(In&&In.hd===3){t=In.tl;continue}}o={hd:g,tl:s},t=l.tl;continue}var fe=kr(s),xn=Go(fe);if(!(_>1&&xn<u.contents))return fe;u.contents=xn,i=_-1|0,o=0,t=fe}};return r>0?Ze(a(it(e),0,r)):e}function Gr(n,e){switch(e.TAG|0){case 0:return n===e._0;case 1:return Yt(e._1,function(u){return Gr(n,u)});case 2:var r=e._0;return r.TAG===0?!1:Yt(zn.toArray(r._0),function(u){return Gr(n,u[1])})}}function Fa(n,e,r){if(Gr(n,e))return{TAG:1,_0:A({TAG:0,_0:n})+" occurs in "+A(e)};var u=Cr(r,n);return u!==void 0?Vn(u,e)?{TAG:0,_0:r}:{TAG:1,_0:A(e)+" is not unifiable with "+A(u)}:{TAG:0,_0:Vr(r,n,e)}}function et(n,e){for(;;){var r=n;if(!r)return{TAG:0,_0:e};var u=r.tl,a=r.hd,t=a[1],o=a[0],i=0;switch(o.TAG|0){case 0:var _=o._0,s=0;switch(t.TAG|0){case 0:if(_===t._0){n=u;continue}s=3;break;case 1:case 2:s=3;break}if(s===3)return F(Fa(_,t,e),function(nn){return function(B){return et(nn,B)}}(u));break;case 1:var l=o._1;switch(t.TAG|0){case 0:i=1;break;case 1:var g=t._1;if(o._0===t._0&&l.length===g.length){var d=pn(Re(l,g),u,function(nn,B){return{hd:[h(e,B[0]),h(e,B[1])],tl:nn}});n=d;continue}i=2;break;case 2:i=2;break}break;case 2:var R=o._0;switch(t.TAG|0){case 0:i=1;break;case 1:i=2;break;case 2:var $=t._0;if(R.TAG===0){var x=R._0;if($.TAG===0){if(x!==$._0)return{TAG:1,_0:"cannot unify "+A(o)+" with "+A(t)};n=u;continue}var tn=Yn(x);if(tn===void 0)return{TAG:1,_0:'undeclared struct "'+x+'"'};var dn=et({hd:[{TAG:2,_0:{TAG:1,_0:$._0}},ye.toPartialStructType(tn,le())],tl:u},e);return dn.TAG===0?{TAG:0,_0:dn._0}:{TAG:1,_0:"struct type "+A(t)+" does not match "+x+": "+dn._0}}var Sn=R._0;if($.TAG===0){var Tn=$._0,hn=Yn(Tn);if(hn===void 0)return{TAG:1,_0:'undeclared struct "'+Tn+'"'};var mn=et({hd:[{TAG:2,_0:{TAG:1,_0:Sn}},ye.toPartialStructType(hn,le())],tl:u},e);return mn.TAG===0?{TAG:0,_0:mn._0}:{TAG:1,_0:"struct type "+A(o)+" does not match "+Tn+": "+mn._0}}var Gn=zn.toMap($._0),cn=zn.toArray(Sn);return F(Ac(v(cn,function(nn,B,On){return function(bn){var En=bn[0],en=Zt(On,En);return en!==void 0?{TAG:0,_0:[bn[1],en]}:{TAG:1,_0:"struct type "+A(B)+' is missing attribute "'+En+'" from type "'+A(nn)+'"'}}}(o,t,Gn)),function(nn){return nn}),function(nn,B,On,bn){return function(En){var en={TAG:2,_0:{TAG:1,_0:zn.fromArray(Rr(go(On,v(bn,function(kn){return kn[0]}))),le())}};return et(ho(it(En),{hd:[zn.tail(B),en],tl:nn}),e)}}(u,Sn,Gn,cn))}break}switch(i){case 1:return F(Fa(t._0,o,e),function(nn){return function(B){return et(nn,B)}}(u));case 2:return{TAG:1,_0:A(o)+" is not unifiable with "+A(t)}}}}function rn(n,e){return et({hd:[n,e],tl:0},void 0)}function ef(n){var e;return e=typeof n=="number"?Ae:n.TAG===0?ae:Xn,He(e)}function tf(n){var e=0;if(n>=5)switch(n){case 5:case 6:case 7:case 8:e=2;break;case 9:case 10:e=3;break;case 11:case 12:return He(Dn([Xn,Xn],Xn));case 13:case 14:case 15:case 16:e=1;break}else e=1;switch(e){case 1:return He(Dn([ae,ae],ae));case 2:return He(Dn([ae,ae],Xn));case 3:return[[0],Dn([{TAG:0,_0:0},{TAG:0,_0:0}],Xn)]}}function rf(n){switch(n){case 0:return He(Dn([ae],ae));case 1:return He(Dn([Xn],Xn));case 2:return[[0],Dn([ic({TAG:0,_0:0})],{TAG:0,_0:0})]}}function uf(n,e){return"cannot infer struct type: inferred type "+zn.show(n,A)+" matches "+E(e,", ",function(r){return r.name})}function gr(n){var e=wo(Pr(qn.structs),function(u){return po(rn({TAG:2,_0:{TAG:1,_0:n}},ye.toPartialStructType(u,le())),void 0,function(a){return u})});if(e.length!==1)return e.length===0?0:{TAG:1,_0:e};var r=e[0];return{TAG:0,_0:r}}var Na={ambiguousMatchesError:uf,findMatchingStruct:gr},tt=Ht();function Da(n,e,r,u,a){var t=Rn.typeOf(r);_t(tt,t);var o=pn(e,n,function(s,l){return Cn.addMono(s,l.contents.name,l.contents.ty)}),i=Dn(v(e,function(s){return s.contents.ty}),t),_=a!==void 0?Cn.addMono(o,a,i):o;return F(An(_,r,t),function(s){var l=h(s,i),g=h(s,u),d=ln(s,n),R=ur(d,l);return J(rn(g,l),function($){ct(tt);var x=L($,s);return[x,h($,g),yu($,R)]})})}function An(n,e,r){return F(Qn(n,e),function(u){return J(rn(h(u,r),h(u,Rn.typeOf(e))),function(a){return L(a,u)})})}function Qn(n,e){switch(e.TAG|0){case 0:var r=$t(ef(e._0));return rn(Rn.typeOf(e),r);case 1:var u=e._3,a=e._2,t=e._1,o=e._0;return F(Qn(n,t),function(c){var T=ln(c,n);return F(Qn(T,u),function(p){var b=L(p,c),C=h(b,Dn([Rn.typeOf(t),Rn.typeOf(u)],o)),U=$t(tf(a));return J(rn(C,U),function(Y){return L(Y,b)})})});case 2:var i=e._2,_=e._1,s=e._0,l=Rn.typeOf(i);return F(Qn(n,i),function(c){var T=h(c,Dn([l],s)),p=$t(rf(_));return J(rn(T,p),function(b){return L(b,c)})});case 3:var g=e._0.contents,d=Cn.get(n,g.name);if(d!==void 0)return rn(g.ty,$t(d));var R=Yn(g.name);if(R===void 0)return{TAG:1,_0:'unbound variable: "'+g.name+'"'};var $={TAG:2,_0:{TAG:1,_0:zn.fromArray(v(R.staticFuncs,function(c){var T=c.name;return[T.contents.name,T.contents.ty]}),le())}};return rn(g.ty,$);case 4:var x=e._1,tn=e._0,dn=gn.typeOfExpr(tn),Sn=gn.typeOfExpr(x);return F(Qn(n,x),function(c){var T=ln(c,n),p=h(c,dn);return F(An(T,tn,p),function(b){var C=L(b,c),U=h(b,p),Y=h(C,Sn);return J(rn(U,Y),function(H){return L(H,C)})})});case 5:return J(Da(n,e._1,e._2,e._0,void 0),function(c){return c[0]});case 6:var Tn=e._4,hn=e._3,mn=e._0,Gn=e._2.contents,cn=Rn.typeOf(hn);return F(Qn(n,hn),function(c){var T=ln(c,n),p=h(c,cn),b=h(c,mn),C=ur(Cn.remove(T,Gn.name),p),U=Cn.add(T,Gn.name,C);return F(An(U,Tn,b),function(Y){var H=L(Y,c);return J(rn(h(H,cn),h(H,Gn.ty)),function(Ln){return L(Ln,H)})})});case 7:var nn=e._4,B=e._3,On=e._2,bn=e._0,En=e._1.contents,en=Rn.typeOf(B);_t(tt,en);var kn=Dn(v(On,function(c){return c.contents.ty}),en),Mn=pn(On,n,function(c,T){return Cn.addMono(c,T.contents.name,T.contents.ty)}),_e=Cn.addMono(Mn,En.name,kn);return F(An(_e,B,en),function(c){var T=ln(c,_e),p=h(c,kn),b=h(c,bn),C=Cn.add(T,En.name,ur(T,p));return F(An(C,nn,b),function(U){var Y=L(U,c);return J(rn(En.ty,h(U,p)),function(H){return ct(tt),L(H,Y)})})});case 8:var yn=e._2,jn=v(yn,Rn.typeOf),Xe=Dn(jn,e._0);return J(F(An(n,e._1,Xe),function(c){return pn(Re(yn,jn),{TAG:0,_0:[c,ln(c,n)]},function(T,p){var b=p[1],C=p[0];return F(T,function(U){var Y=U[1],H=U[0],Ln=h(H,b);return J(An(Y,C,Ln),function(Wn){return[L(Wn,H),ln(Wn,Y)]})})})}),function(c){return c[0]});case 9:var Zn=e._2,In=e._0;return F(pn(e._1,{TAG:0,_0:[void 0,n]},function(c,T){return F(c,function(p){var b=p[1],C=p[0];return J(af(b,T),function(U){return[L(U,C),ln(U,b)]})})}),function(c){var T=c[0];return Zn!==void 0?F(Qn(ln(T,n),Zn),function(p){var b=Rn.typeOf(Zn),C=L(p,T);return J(rn(h(C,In),h(C,b)),function(U){return L(U,C)})}):J(rn(h(T,In),Ae),function(p){return L(p,T)})});case 10:var fe=e._3,xn=e._2,ge=e._0;return F(An(n,e._1,Xn),function(c){var T=ln(c,n),p=h(c,ge);return F(An(T,xn,p),function(b){var C=ln(b,T),U=h(b,p),Y=L(b,c);return J(An(C,fe,U),function(H){return L(H,Y)})})});case 11:var ze=e._1,qt=Rn.typeOf(ze);return F(Qn(n,e._0),function(c){var T=h(c,qt),p=ln(c,n);return J(An(p,ze,T),function(b){return L(b,c)})});case 12:var Ve=We(tt);return Ve!==void 0?An(n,on(e._0,{TAG:0,_0:0},function(c){return c}),Ve):{TAG:1,_0:"'return' used outside of a function"};case 13:return An(n,e._0,e._1);case 14:var mt=pn(e._0,{TAG:0,_0:[Qe,n]},function(c,T){return F(c,function(p){var b=p[1],C=p[0];return F(Qn(b,T),function(U){var Y=L(U,C),H=ln(U,b);return{TAG:0,_0:[Y,H]}})})});return J(mt,function(c){return c[0]});case 15:var ut=e._1,Fe=e._0,Pe=Yn(Fe);if(Pe===void 0)return{TAG:1,_0:'undeclared struct "'+Fe+'"'};var Be=Pe.attributes,Et=pn(pt(Be,function(c){return pe(c.impl)}),{TAG:0,_0:[n,Qe]},function(c,T){var p=T.ty,b=T.name;return F(c,function(C){var U=C[1],Y=C[0],H=At(ut,function(Ln){return Ln[0]===b});return H!==void 0?F(An(Y,H[1],p),function(Ln){var Wn=ln(Ln,Y),Ee=L(Ln,U);return{TAG:0,_0:[Wn,Ee]}}):{TAG:1,_0:'missing attribute "'+b+'" for struct "'+Fe+'"'}})}),at=or(ut,function(c){var T=c[0];if(!Yt(Be,function(p){return p.name===T}))return T});return at!==void 0?{TAG:1,_0:'extraneous attribute: "'+at+'" for struct "'+Fe+'"'}:J(Et,function(c){return c[1]});case 16:var he=e._2,wt=e._1,me=e._0;return F(Qn(n,wt),function(c){var T=gn.typeOfExpr(wt),p=h(c,T),b=function(O){return Br(p,h(O,T))?An(ln(O,n),e,h(O,me)):{TAG:0,_0:O}};switch(p.TAG|0){case 0:case 1:break;case 2:var C=p._0;if(C.TAG===0){var U=C._0,Y=Yn(U);if(Y===void 0)return{TAG:1,_0:'undeclared struct: "'+U+'"'};var H=At(Y.attributes,function(O){return O.name===he});if(H===void 0)return{TAG:1,_0:'attribute "'+he+'" does not exist on struct "'+U+'"'};var Ln=on(H.impl,H.ty,function(O){return O[0].contents.ty});return J(rn(h(c,me),h(c,Ln)),function(O){return L(O,c)})}var Wn=C._0,Ee=Zt(zn.toMap(Wn),he);if(Ee!==void 0)return J(rn(h(c,me),h(c,Ee)),function(O){return L(O,c)});var ot=zn.insert(Wn,he,me),qe=h(c,{TAG:2,_0:{TAG:1,_0:ot}}),je=gr(ot);if(typeof je!="number")return je.TAG===0?F(rn(p,{TAG:2,_0:{TAG:0,_0:je._0.name}}),function(O){return b(L(O,c))}):F(rn(p,qe),function(O){return b(L(O,c))});var M=0;switch(T.TAG|0){case 0:return{TAG:0,_0:L(Vr(Qe,T._0,qe),c)};case 1:case 2:M=2;break}if(M===2)return J(rn(T,qe),function(O){return L(O,c)});break}var Fn=le(),wn=zn.insert(zn.make({TAG:0,_0:Fn}),he,me),un=h(c,{TAG:2,_0:{TAG:1,_0:wn}}),Nn=gr(wn);return typeof Nn=="number"?{TAG:1,_0:"no struct declaration matches type "+A(un)}:Nn.TAG===0?F(rn(p,{TAG:2,_0:{TAG:0,_0:Nn._0.name}}),function(O){return b(L(O,c))}):F(rn(p,un),function(O){return b(L(O,c))})})}}function af(n,e){return Qn(n,e._0)}function hr(n,e){return n+"_"+e}function Ra(n,e){switch(e.TAG|0){case 0:var r=e._0.contents;return J(Da(n,v(e._1,function(_){return _[0]}),e._2,r.ty,r.newName),function(_){var s=_[0];return[ln(s,Cn.addMono(n,r.name,r.ty)),s]});case 1:var u=e._0;return J(An(n,e._2,u.contents.ty),function(_){return[ln(_,Cn.addMono(n,u.contents.name,u.contents.ty)),_]});case 2:return{TAG:0,_0:[n,Qe]};case 3:var a=e._0,t=Yn(a);return t!==void 0?pn(e._1,{TAG:0,_0:[n,Qe]},function(_,s){var l=s[2],g=s[1],d=s[0];return F(_,function(R){var $=R[1],x=R[0];d.contents.newName=hr(a,d.contents.name);var tn=on(De(g,0),[!1,!1],function(cn){return cn[0].contents.name==="self"?[!0,cn[1]]:[!1,!1]}),dn;if(tn[0]){ye.addImplementation(t,d,tn[1]);var Sn=Vn(g,[])?[]:Eo(g,1),Tn={TAG:2,_0:{TAG:0,_0:a}},hn=De(g,0),mn;if(hn!==void 0){var Gn=hn[0];Gn.contents.ty=Tn,mn=Cn.addMono(x,Gn.contents.name,Tn)}else mn=x;dn=[mn,Sn]}else ye.addStaticFunc(t,d),dn=[n,g];return F(Ra(dn[0],{TAG:0,_0:d,_1:dn[1],_2:l}),function(cn){var nn=L(cn[1],$);na(nn,d);var B=Cn.remove(cn[0],d.contents.name);return{TAG:0,_0:[B,nn]}})})}):{TAG:1,_0:'cannot implement for unknown type "'+a+'"'};case 4:var o=e.name,i=Dn(v(e.args,function(_){return _[0].contents.ty}),e.ret);return J(rn(o.contents.ty,i),function(_){return[ln(_,Cn.addMono(n,o.contents.name,o.contents.ty)),_]})}}function La(n){return mo(tt),pn(n,{TAG:0,_0:[Cn.empty,Qe]},function(e,r){return F(e,function(u){var a=u[1];return J(Ra(u[0],r),function(t){return[t[0],L(t[1],a)]})})})}var rt=fn("CompilerExn.InvalidTypeConversion"),mr=fn("CompilerExn.InvalidFunctionSignature"),Xt=fn("CompilerExn.VariableNotFound"),$a=fn("CompilerExn.EmptyFunctionStack"),Oe=fn("CompilerExn.CannotReassignImmutableValue"),Ca=fn("CompilerExn.FunctionNotFound"),ke=fn("CompilerExn.Unimplemented"),of=fn("CompilerExn.UnsupportedGlobalInitializer"),Un=fn("CompilerExn.InvalidTypeAssertion"),Ua=fn("CompilerExn.DerefUsedOutsideOfUnsafeBlock"),Oa=fn("CompilerExn.UndeclaredStruct"),zt=fn("CompilerExn.InvalidAttributeAccess"),Ma=fn("CompilerExn.StructTypeNotMatched"),Xa=fn("CompilerExn.AmibguousStruct");function ht(n){return n.RE_EXN_ID===rt?"unsupported type: "+A(n._1):n.RE_EXN_ID===mr?"invalid function signature: "+A(n._1):n.RE_EXN_ID===Xt?'variable "'+n._1+'" not found':n.RE_EXN_ID===$a?"Function stack is empty":n.RE_EXN_ID===Oe?'cannot mutate "'+n._1+'" as it is behind an immutable binding':n.RE_EXN_ID===Ca?'no function named "'+n._1+'" found':n.RE_EXN_ID===ke?"unimplemented: "+n._1:n.RE_EXN_ID===of?"unsupported global initializer: "+Rn.show(void 0,n._1):n.RE_EXN_ID===Un?"invalid type assertion from "+A(n._1)+" to "+A(n._2):n.RE_EXN_ID===Ua?"the deref operator can only be used in an unsafe block":n.RE_EXN_ID===oe.UnkownTypeSize?"unknown type size: "+A(n._1):n.RE_EXN_ID===Oa?'undeclared struct "'+n._1+'"':n.RE_EXN_ID===zt?n._1+' does not exist for type "'+A(n._2)+'"':n.RE_EXN_ID===Ma?"No struct declaration matches type "+A(n._1):n.RE_EXN_ID===Xa?Na.ambiguousMatchesError(n._1,n._2):n.RE_EXN_ID===gn.UndeclaredIdentifer?'identifier "'+n._1+'" not found':n.RE_EXN_ID===gn.UnexpectedDeclarationInImplBlock?"unexpected declaration in impl block: "+Se.show(void 0,n._1):n.RE_EXN_ID===gn.UnreachableLetStmt?"unreachable: let statement found in Core.fromStmt":"unexpected compiler exception"}function cf(n,e,r,u){return{name:n,depth:e,ty:r,isMutable:u}}function Er(n){if(n.TAG===0){var e=n._0,r=Yn(e);if(r!==void 0)return r;throw{RE_EXN_ID:Oa,_1:e,Error:new Error}}var u=n._0,a=Na.findMatchingStruct(u);if(typeof a=="number")throw{RE_EXN_ID:Ma,_1:{TAG:2,_0:n},Error:new Error};if(a.TAG===0)return a._0;throw{RE_EXN_ID:Xa,_1:u,_2:a._0,Error:new Error}}function Me(n){switch(n.TAG|0){case 0:throw{RE_EXN_ID:rt,_1:n,Error:new Error};case 1:switch(n._0){case"()":if(n._1.length!==0)throw{RE_EXN_ID:rt,_1:n,Error:new Error};return[];case"Fun":case"Ptr":return[0];case"Tuple":return _n(v(n._1,Me));case"bool":case"u32":break;case"u64":if(n._1.length!==0)throw{RE_EXN_ID:rt,_1:n,Error:new Error};return[1];default:throw{RE_EXN_ID:rt,_1:n,Error:new Error}}if(n._1.length!==0)throw{RE_EXN_ID:rt,_1:n,Error:new Error};return[0];case 2:var e=Er(n._0);return e.size===0?[]:[0]}}function _f(n,e){switch(e.TAG|0){case 1:if(e._0==="Tuple"){var r=_n(v(e._1,Me)),u=[],a={_0:u,_1:r},t=Bn.getOrAddSignature(n,a);return{TAG:1,_0:t,_1:[[],r]}}break}var o=Me(e),i=o.length;if(i!==1){if(i===0)return 0;throw{RE_EXN_ID:ke,_1:"wasmBlockReturnTypeOf for "+A(e),Error:new Error}}var _=o[0];return{TAG:0,_0:_}}function wr(n){switch(n.TAG|0){case 1:if(n._0==="Fun"){var e=n._1,r=e.slice(0,e.length-1|0),u=De(e,e.length-1|0);return qr(lt.Signature.make,_n(v(r,Me)),on(u,[],Me))}throw{RE_EXN_ID:mr,_1:n,Error:new Error};case 0:case 2:throw{RE_EXN_ID:mr,_1:n,Error:new Error}}}function pr(n,e,r){return{name:n,locals:[],params:pt(e,function(u){return!oe.isZeroSizedType(u[1])}),ret:r,instructions:[]}}function k(n,e){n.instructions.push(e)}function ff(n,e,r,u,a){return n.locals.push(cf(e,u,r,a)),(n.params.length+n.locals.length|0)-1|0}function sf(n,e){var r=jt(n.params,function(t){return t[0]===e});if(r!==void 0){var u=we(n.params,r);return[r,u[2]]}var a=Iu(n.locals,function(t){return t.name===e});if(a!==void 0)return[n.params.length+a|0,we(n.locals,a).isMutable]}function lf(n){var e=wr(Dn(v(n.params,function(a){return a[1]}),n.ret)),r=w(lt.Local.fromTypes,_n(v(n.locals,function(a){return v(Me(a.ty),function(t){return[a.name,t]})}))),u=qr(lt.Body.make,r,nf(void 0,n.instructions));return lt.make(n.name,e,u)}function za(n,e,r,u,a){return{name:n,mutability:e,ty:r,index:u,init:a}}function vf(n){var e=n.init,r=n.mutability;return y(n.ty,function(u){return vt.make(r!==2,u,e)})}function S(n){var e=We(n.funcStack);if(e!==void 0)return e;throw{RE_EXN_ID:$a,Error:new Error}}function Ar(n,e){return y(xu(n.funcs,function(r){return r.name===e}),function(r){var u=n.externFuncs.length;return[r[0],u+r[1]|0]})}function df(n,e){return xu(n.externFuncs,function(r){return r.name===e})}function Tf(n,e){var r=We(n.blockStack);if(r!==void 0&&!(e<=0)){var u=r.shadowStackDelta;return u.contents=u.contents+e|0,k(S(n),{TAG:9,_0:n.stackTop.index}),k(S(n),{TAG:0,_0:e}),k(S(n),5),k(S(n),{TAG:10,_0:n.stackTop.index})}}function Gf(n,e){var r=We(n.blockStack);if(r!==void 0&&!(e<=0)){var u=r.shadowStackDelta;return u.contents=u.contents-e|0,k(S(n),{TAG:9,_0:n.stackTop.index}),k(S(n),{TAG:0,_0:e}),k(S(n),4),k(S(n),{TAG:10,_0:n.stackTop.index})}}function Va(n){var e=We(n.blockStack);return e!==void 0?e.isUnsafe:!1}function Pa(n,e){return n.scopeDepth=n.scopeDepth+1|0,_t(n.blockStack,{isUnsafe:e||Va(n),shadowStackDelta:{contents:0}})}function gf(n){n.scopeDepth=n.scopeDepth-1|0,Gf(n,on(We(n.blockStack),0,function(e){return e.shadowStackDelta.contents})),ct(n.blockStack)}function hf(n,e,r,u){var a=S(n),t=ff(a,e,r,n.scopeDepth,u);return k(S(n),{TAG:12,_0:t})}function Ba(n,e,r,u,a){var t=bo(n.globals),o=za(e,r,u,t,a);return Kt(n.globals,e,o),t}function Vt(n,e){var r=S(n),u=sf(r,e);return u!==void 0?{TAG:0,_0:u[0],_1:u[1]}:y(Or(n.globals,e),function(a){return{TAG:1,_0:a.index,_1:a.mutability===1}})}function mf(n){if(typeof n!="number")return n.TAG===0?{TAG:0,_0:n._0}:{TAG:0,_0:n._0?1:0}}function qa(n){if(!Va(n))throw{RE_EXN_ID:Ua,Error:new Error}}function Pt(n,e,r){switch(e.TAG|0){case 0:case 1:return{TAG:1,_0:{RE_EXN_ID:zt,_1:r,_2:e}};case 2:var u=Er(e._0),a=At(u.attributes,function(i){return i.name===r});if(a===void 0)return{TAG:1,_0:{RE_EXN_ID:zt,_1:r,_2:e}};var t=a.impl;if(t===void 0)return{TAG:0,_0:{TAG:0,_0:{offset:a.offset,ty:a.ty,size:a.size,mut:a.mut}}};var o=Ar(n,hr(u.name,t[0].contents.name));return o!==void 0?{TAG:0,_0:{TAG:1,_0:[o[0],o[1],t[1]]}}:{TAG:1,_0:{RE_EXN_ID:zt,_1:r,_2:e}}}}function ja(n){return Kn(void 0,"__lambda"+String(n.funcs.length)+"__")}function Bt(n,e){for(;;){var r=e;switch(r.TAG|0){case 3:var u=r._0,a=Vt(n,u.contents.newName);if(a!==void 0)return a._1?void 0:u.contents.name;throw{RE_EXN_ID:Xt,_1:u.contents.name,Error:new Error};case 16:var t=r._2,o=r._1,i=Pt(n,gn.typeOfExpr(o),t);if(i.TAG===0){var _=i._0;if(_.TAG!==0)return;if(!_._0.mut)return t;e=o;continue}throw i._0;default:return}}}function W(n,e){for(;;){var r=e;switch(r.TAG|0){case 0:var u=mf(r._0);return u!==void 0?k(S(n),u):void 0;case 1:var a=r._3,t=r._2,o=r._1;if(oe.isZeroSizedType(gn.typeOfExpr(o))){e={TAG:0,_0:{TAG:1,_0:t===9}};continue}var i=function(M,Fn){return function(un){return W(n,M),W(n,Fn),k(S(n),un)}}(o,a);switch(t){case 0:return i(4);case 1:return i(5);case 2:return i(6);case 3:return i(7);case 4:return i(43);case 5:return i(31);case 6:return i(19);case 7:return i(37);case 8:return i(25);case 9:return i(10);case 10:return i(14);case 11:e={TAG:10,_0:Xn,_1:o,_2:a,_3:{TAG:0,_0:{TAG:1,_0:!1}}};continue;case 12:e={TAG:10,_0:Xn,_1:o,_2:{TAG:0,_0:{TAG:1,_0:!0}},_3:a};continue;case 13:return i(44);case 14:return i(45);case 15:return i(46);case 16:return i(48)}case 2:var _;switch(r._1){case 0:throw{RE_EXN_ID:ke,_1:"u32 negation is not handled",Error:new Error};case 1:_=9;break;case 2:qa(n),_={TAG:16,_0:0,_1:0};break}return W(n,r._2),k(S(n),_);case 3:var s=r._0;if(oe.isZeroSizedType(s.contents.ty))return;var l=Vt(n,s.contents.newName);if(l!==void 0)return l.TAG===0?k(S(n),{TAG:11,_0:l._0}):k(S(n),{TAG:9,_0:l._0});throw{RE_EXN_ID:Xt,_1:s.contents.name,Error:new Error};case 4:var g=r._1,d=r._0;if(oe.isZeroSizedType(gn.typeOfExpr(g)))return;switch(d.TAG|0){case 2:if(d._1>=2){qa(n),W(n,d._2),W(n,g);var R=oe.sizeLog2(gn.typeOfExpr(g)),$={TAG:17,_0:R,_1:0};return k(S(n),$)}throw{RE_EXN_ID:ke,_1:"[unreachable]: assignement to an invalid lhs expression",Error:new Error};case 3:var x=d._0,tn=Vt(n,x.contents.newName);if(tn!==void 0){if(tn._1){var dn;return dn=tn.TAG===0?{TAG:12,_0:tn._0}:{TAG:10,_0:tn._0},W(n,g),k(S(n),dn)}throw{RE_EXN_ID:Oe,_1:x.contents.name,Error:new Error}}throw{RE_EXN_ID:Xt,_1:x.contents.name,Error:new Error};case 16:var Sn=d._2,Tn=d._1,hn=Pt(n,gn.typeOfExpr(Tn),Sn);if(hn.TAG===0){var mn=hn._0;if(mn.TAG===0){var Gn=mn._0;if(!Gn.mut)throw{RE_EXN_ID:Oe,_1:Sn,Error:new Error};var cn=Bt(n,Tn);if(cn!==void 0)throw{RE_EXN_ID:Oe,_1:cn,Error:new Error};return Gn.size>0?(W(n,Tn),W(n,g),k(S(n),{TAG:17,_0:0,_1:Gn.offset})):void 0}throw{RE_EXN_ID:ke,_1:"cannot reassign "+Sn+" for type "+A(gn.typeOfExpr(Tn)),Error:new Error}}throw hn._0;default:throw{RE_EXN_ID:ke,_1:"[unreachable]: assignement to an invalid lhs expression",Error:new Error}}case 5:var nn=ja(n),B=Sr(n,nn,v(r._1,function(M){return[M,!1]}),r._2);return k(S(n),{TAG:0,_0:B});case 6:var On=r._3,bn=r._2.contents;oe.isZeroSizedType(gn.typeOfExpr(On))||(W(n,On),hf(n,bn.name,bn.ty,r._1)),e=r._4;continue;case 7:var En=ja(n);r._1.contents.newName=En.contents.name,Sr(n,En,v(r._2,function(M){return[M,!1]}),r._3),e=r._4;continue;case 8:var en=r._2,kn=r._1,Mn=function(M){return function(wn){return $n(M,function(un){return W(n,un)}),k(S(n),{TAG:14,_0:wn})}}(en),_e=function(M,Fn){return function(un){$n(Fn,function(Ja){return W(n,Ja)});var Nn=gn.typeOfExpr(M),O=wr(Nn),Ne=Bn.getOrAddSignature(n.mod,O);return W(n,M),k(S(n),{TAG:15,_0:Ne,_1:0})}}(kn,en),yn=function(M){return function(wn,un){var Nn=un!==void 0?Q([un],M):M;return $n(Re(Nn,wn),function(O){var Ne=O[1];if(!!(Ne[2]&&er(Ne[1])&&bt(Bt(n,O[0]))))throw{RE_EXN_ID:Oe,_1:Ne[0],Error:new Error}})}}(en);switch(kn.TAG|0){case 3:var jn=kn._0,Xe=Vt(n,jn.contents.newName);if(Xe!==void 0)return _e(void 0);var Zn=Ar(n,jn.contents.newName);if(Zn!==void 0)return yn(Zn[0].params,void 0),Mn(Zn[1]);var In=df(n,jn.contents.newName);if(In!==void 0)return yn(In[0].args,void 0),Mn(In[1]);throw{RE_EXN_ID:Ca,_1:jn.contents.name,Error:new Error};case 16:var fe=kn._2,xn=kn._1,ge;if(xn.TAG===3){var ze=xn._0.contents.name,qt=Yn(ze);if(qt!==void 0){var Ve=Ar(n,hr(ze,fe));if(Ve!==void 0)ge=[!1,Ve[0],Ve[1]];else throw{RE_EXN_ID:ke,_1:'static function "'+fe+'" does not exists on struct '+ze,Error:new Error}}else ge=[!0,void 0,void 0]}else ge=[!0,void 0,void 0];var mt=ge[2],ut=ge[1],Fe=ge[0],Pe;if(ut!==void 0)Pe=ut;else{var Be=Pt(n,gn.typeOfExpr(xn),fe);if(Be.TAG===0){var Et=Be._0;Pe=Et.TAG===0?void 0:Et._0[0]}else throw Be._0}return on(Pe,void 0,function(M,Fn){return function(wn){var un=Fn?M:void 0;return yn(wn.params,un)}}(xn,Fe)),Fe&&W(n,xn),mt!==void 0?Mn(mt):_e(void 0);default:return _e(void 0)}case 9:var at=r._2;return Pa(n,r._3===1),$n(r._1,function(M){return Ef(n,M)}),at!==void 0&&W(n,at),gf(n);case 10:var he=r._3,wt=_f(n.mod,r._0);return W(n,r._1),k(S(n),{TAG:4,_0:wt}),W(n,r._2),Br(he,{TAG:0,_0:0})&&(k(S(n),0),W(n,he)),k(S(n),1);case 11:return k(S(n),{TAG:7,_0:0}),k(S(n),{TAG:8,_0:0}),W(n,r._0),k(S(n),9),k(S(n),{TAG:5,_0:1}),W(n,r._1),k(S(n),{TAG:6,_0:0}),k(S(n),1),k(S(n),1);case 12:var me=r._0;return me!==void 0&&W(n,me),k(S(n),2);case 13:var c=r._2,T=r._1;if(!Vn(T,c))switch(T.TAG|0){case 1:switch(T._0){case"Ptr":var p=T._1;if(p.length!==1)throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error};var b=p[0];switch(b.TAG|0){case 1:if(b._0==="u32"){if(b._1.length!==0)throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error};switch(c.TAG|0){case 1:if(c._0==="u32"){if(c._1.length!==0)throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error}}else throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error};break;case 0:case 2:throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error}}}else throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error};break;case 0:case 2:throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error}}break;case"u32":if(T._1.length!==0)throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error};switch(c.TAG|0){case 1:if(c._0==="Ptr"){if(c._1.length!==1)throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error}}else throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error};break;case 0:case 2:throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error}}break;default:throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error}}break;case 0:case 2:throw{RE_EXN_ID:Un,_1:T,_2:c,Error:new Error}}e=r._0;continue;case 14:return $n(r._0,function(M){return W(n,M)});case 15:var C=r._1,U=zr(Yn(r._0)),Y=U.size;Tf(n,Y),$n(Re(U.attributes,C),function(M){var Fn=M[0],wn=Fn.ty;if(Fn.mut&&er(wn)){var un=Bt(n,M[1][1]);if(un!==void 0)throw{RE_EXN_ID:Oe,_1:un,Error:new Error}}if(pe(Fn.impl)&&oe.size(wn)>0)return k(S(n),{TAG:9,_0:n.stackTop.index})}),Y>0&&k(S(n),{TAG:9,_0:n.stackTop.index});var H={contents:0};return $n(C,function(M){return function(Fn){var wn=Fn[1],un=function(Ne){W(n,wn),k(S(n),{TAG:17,_0:0,_1:M.contents}),M.contents=M.contents+Ne|0},Nn=Rn.typeOf(wn);switch(Nn.TAG|0){case 0:break;case 1:var O=0;switch(Nn._0){case"()":if(Nn._1.length===0)return;break;case"Fun":return un(4);case"Ptr":if(Nn._1.length===1)return un(4);break;case"bool":case"u32":O=2;break}if(O===2&&Nn._1.length===0)return un(4);break;case 2:return Er(Nn._0),un(4)}throw{RE_EXN_ID:ke,_1:"cannot store "+A(Nn)+" in the shadow stack",Error:new Error}}}(H));case 16:var Ln=r._1,Wn=Pt(n,gn.typeOfExpr(Ln),r._2);if(Wn.TAG===0){var Ee=Wn._0;if(Ee.TAG===0){var ot=Ee._0;return oe.isZeroSizedType(ot.ty)?void 0:(W(n,Ln),k(S(n),{TAG:16,_0:0,_1:ot.offset}))}var qe=Ee._0;if(qe[2]){var je=Bt(n,Ln);if(je!==void 0)throw{RE_EXN_ID:Oe,_1:je,Error:new Error}}return k(S(n),{TAG:0,_0:qe[1]})}throw Wn._0}}}function Ef(n,e){var r=e._0;return W(n,r),$n(Me(Rn.typeOf(r)),function(u){return k(S(n),3)})}function Sr(n,e,r,u){var a=v(r,function(i){var _=i[0];return[_.contents.name,_.contents.ty,i[1]||!er(_.contents.ty)]}),t=pr(e.contents.newName,a,Rn.typeOf(u)),o=n.funcs.push(t)-1|0;return _t(n.funcStack,t),W(n,u),k(S(n),1),ct(n.funcStack),o}function wf(n,e){var r=pr("__isolated__",[],gn.typeOfExpr(e));return _t(n.funcStack,r),W(n,e),ct(n.funcStack),r}function Za(n,e){switch(e.TAG|0){case 0:Sr(n,e._0,e._1,e._2);return;case 1:var r=e._1,u=e._0;Pa(n,!1);var a=wf(n,e._2),t=a.instructions;if(t.length===1){var o=t[0];if(typeof o!="number"&&o.TAG===0){Ba(n,u.contents.name,r?1:2,0,w(vt.Initializer.fromInstructions,[{TAG:0,_0:o._0}]));return}}So(n.globalsInitializer.instructions,"push",[t]);var i=Ba(n,u.contents.name,r?1:0,0,w(vt.Initializer.fromInstructions,[{TAG:0,_0:0}]));n.globalsInitializer.instructions.push({TAG:10,_0:i});return;case 2:return;case 3:return $n(e._1,function(g){return Za(n,{TAG:0,_0:g[0],_1:g[1],_2:g[2]})});case 4:var _=e.name,s=wr(_.contents.ty),l=Bn.getOrAddSignature(n.mod,s);Bn.addImport(n.mod,Ou.make("index",_.contents.name,{_0:l})),n.externFuncs.push({name:_.contents.name,args:v(e.args,function(g){var d=g[0];return[d.contents.name,d.contents.ty,g[1]]}),ret:e.ret});return}}function pf(n){var e={mod:Bn.make(void 0),funcs:[],scopeDepth:0,funcStack:Ht(),globals:Ur(1),globalsInitializer:pr("__initGlobals__",[],Ae),stackTop:za("__STACK_TOP__",1,0,0,w(vt.Initializer.fromInstructions,[{TAG:0,_0:65535}])),blockStack:Ht(),externFuncs:[]};Kt(e.globals,e.stackTop.name,e.stackTop);try{$n(n,function(o){return Za(e,o)}),Bn.addMemory(e.mod,Fu.make(xt.make(65536,void 0))),$n(Ao(Pr(e.globals),function(o,i){return o.index-i.index|0}),function(o){var i=vf(o);if(i!==void 0)return Bn.addGlobal(e.mod,i)});var r=gu.fromFuncRefs(0,Fr(e.funcs,function(o,i){return o}));Bn.addElement(e.mod,r),Bn.addTable(e.mod,lu.make(0,xt.makeExact(e.funcs.length)));var u=e.funcs.length,a=e.globalsInitializer.instructions.length===0;return a||(e.globalsInitializer.instructions.push(1),e.funcs.push(e.globalsInitializer)),$n(e.funcs,function(o){o.name==="main"&&!a&&o.instructions.unshift({TAG:14,_0:u});var i=lf(o);Bn.addExportedFunc(e.mod,o.name,i[1],i[2])}),{TAG:0,_0:e.mod}}catch(o){var t=ft(o);return{TAG:1,_0:ht(t)}}}function Af(n){try{return F(Mt(n),function(r){var u=v(r,Se.from);return F(La(u),function(a){var t=a[1];ea(t);var o=v(u,function(i){return Se.subst(t,i)});return J(pf(o),function(i){var _=Bn.encodeAsUint8Array(i);return[i,_]})})})}catch(r){var e=ft(r);return{TAG:1,_0:ht(e)}}}function Sf(n){try{var e=Mt(n);return e.TAG===0?{TAG:0,_0:E(e._0,`

`,function(u){return wc.show(u)})}:{TAG:1,_0:e._0}}catch(u){var r=ft(u);return{TAG:1,_0:ht(r)}}}function bf(n){try{var e=Mt(n);if(e.TAG!==0)return{TAG:1,_0:e._0};var r=v(e._0,Se.from);return{TAG:0,_0:E(r,`

`,function(a){return Se.show(void 0,a)})}}catch(a){var u=ft(a);return{TAG:1,_0:ht(u)}}}function kf(n){try{var e=Mt(n);if(e.TAG!==0)return{TAG:1,_0:e._0};var r=v(e._0,Se.from),u=La(r);if(u.TAG!==0)return{TAG:1,_0:u._0};var a=u._0[1];ea(a);var t=v(r,function(i){return Se.subst(a,i)});return{TAG:0,_0:E(t,`

`,function(i){return Se.show(void 0,i)})}}catch(i){var o=ft(i);return{TAG:1,_0:ht(o)}}}var Ff={debugAst:Sf,debugCoreAst:bf,debugTypes:kf},Nf=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",compile:Af,Debug:Ff});const br={"0":"Else","1":"End","2":"Return","3":"Drop","4":"AddI32","5":"SubI32","6":"MulI32","7":"DivI32Unsigned","8":"DivI32Signed","9":"EqzI32","10":"EqI32","11":"EqI64","12":"EqF32","13":"EqF64","14":"NeI32","15":"NeI64","16":"NeF32","17":"NeF64","18":"LeI32Signed","19":"LeI32Unsigned","20":"LeI64Signed","21":"LeI64Unsigned","22":"LeF32","23":"LeF64","24":"GeI32Signed","25":"GeI32Unsigned","26":"GeI64Signed","27":"GeI64Unsigned","28":"GeF32","29":"GeF64","30":"LtI32Signed","31":"LtI32Unsigned","32":"LtI64Signed","33":"LtI64Unsigned","34":"LtF32","35":"LtF64","36":"GtI32Signed","37":"GtI32Unsigned","38":"GtI64Signed","39":"GtI64Unsigned","40":"GtF32","41":"GtF64","42":"RemI32Signed","43":"RemI32Unsigned","44":"AndI32","45":"OrI32","46":"ShlI32","47":"ShrI32Signed","48":"ShrI32Unsigned"},D={"0":"I32","1":"I64","2":"F32","3":"F64"},Df={"0":"FuncRef","1":"ExternRef"},Rf={"0":"Func","1":"Table","2":"Memory","3":"Global"},Ge={"0":"Void"},Lf=Nf,Wa=function(n){const e=Lf.compile(n);return e.TAG===0?{tag:"Ok",value:[{typeSection:e._0[0].typeSection.map(function(u){return[u._0.map(function(t){return D[t]}),u._1.map(function(t){return D[t]})]}),importSection:e._0[0].importSection.map(function(u){return{moduleName:u.moduleName,entityName:u.entityName,desc:{tag:"Func",value:u.desc._0}}}),funcSection:e._0[0].funcSection,tableSection:e._0[0].tableSection.map(function(u){return[Df[u[0]],u[1]]}),memorySection:e._0[0].memorySection,globalSection:e._0[0].globalSection.map(function(u){return[D[u[0]],u[1],u[2].map(function(t){return typeof t=="object"?t.TAG===0?{tag:"ConstI32",value:t._0}:t.TAG===1?{tag:"ConstI64",value:t._0}:t.TAG===2?{tag:"ConstF32",value:t._0}:t.TAG===3?{tag:"ConstF64",value:t._0}:t.TAG===4?{tag:"If",value:typeof t._0=="object"?t._0.TAG===0?{tag:"TypeValue",value:D[t._0._0]}:{tag:"TypeIndex",value:[t._0._0,[t._0._1[0].map(function(i){return D[i]}),t._0._1[1].map(function(i){return D[i]})]]}:Ge[t._0]}:t.TAG===5?{tag:"BranchIf",value:t._0}:t.TAG===6?{tag:"Branch",value:t._0}:t.TAG===7?{tag:"Block",value:typeof t._0=="object"?t._0.TAG===0?{tag:"TypeValue",value:D[t._0._0]}:{tag:"TypeIndex",value:[t._0._0,[t._0._1[0].map(function(i){return D[i]}),t._0._1[1].map(function(i){return D[i]})]]}:Ge[t._0]}:t.TAG===8?{tag:"Loop",value:typeof t._0=="object"?t._0.TAG===0?{tag:"TypeValue",value:D[t._0._0]}:{tag:"TypeIndex",value:[t._0._0,[t._0._1[0].map(function(i){return D[i]}),t._0._1[1].map(function(i){return D[i]})]]}:Ge[t._0]}:t.TAG===9?{tag:"GetGlobal",value:t._0}:t.TAG===10?{tag:"SetGlobal",value:t._0}:t.TAG===11?{tag:"GetLocal",value:t._0}:t.TAG===12?{tag:"SetLocal",value:t._0}:t.TAG===13?{tag:"TeeLocal",value:t._0}:t.TAG===14?{tag:"Call",value:t._0}:t.TAG===15?{tag:"CallIndirect",value:[t._0,t._1]}:t.TAG===16?{tag:"LoadI32",value:[t._0,t._1]}:{tag:"StoreI32",value:[t._0,t._1]}:br[t]})]}),exportSection:e._0[0].exportSection.map(function(u){return{name:u.name,kind:Rf[u.kind],index:u.index}}),elementSection:e._0[0].elementSection,codeSection:e._0[0].codeSection.map(function(u){return[u[0].map(function(t){return[t[0],D[t[1]]]}),u[1].map(function(t){return typeof t=="object"?t.TAG===0?{tag:"ConstI32",value:t._0}:t.TAG===1?{tag:"ConstI64",value:t._0}:t.TAG===2?{tag:"ConstF32",value:t._0}:t.TAG===3?{tag:"ConstF64",value:t._0}:t.TAG===4?{tag:"If",value:typeof t._0=="object"?t._0.TAG===0?{tag:"TypeValue",value:D[t._0._0]}:{tag:"TypeIndex",value:[t._0._0,[t._0._1[0].map(function(i){return D[i]}),t._0._1[1].map(function(i){return D[i]})]]}:Ge[t._0]}:t.TAG===5?{tag:"BranchIf",value:t._0}:t.TAG===6?{tag:"Branch",value:t._0}:t.TAG===7?{tag:"Block",value:typeof t._0=="object"?t._0.TAG===0?{tag:"TypeValue",value:D[t._0._0]}:{tag:"TypeIndex",value:[t._0._0,[t._0._1[0].map(function(i){return D[i]}),t._0._1[1].map(function(i){return D[i]})]]}:Ge[t._0]}:t.TAG===8?{tag:"Loop",value:typeof t._0=="object"?t._0.TAG===0?{tag:"TypeValue",value:D[t._0._0]}:{tag:"TypeIndex",value:[t._0._0,[t._0._1[0].map(function(i){return D[i]}),t._0._1[1].map(function(i){return D[i]})]]}:Ge[t._0]}:t.TAG===9?{tag:"GetGlobal",value:t._0}:t.TAG===10?{tag:"SetGlobal",value:t._0}:t.TAG===11?{tag:"GetLocal",value:t._0}:t.TAG===12?{tag:"SetLocal",value:t._0}:t.TAG===13?{tag:"TeeLocal",value:t._0}:t.TAG===14?{tag:"Call",value:t._0}:t.TAG===15?{tag:"CallIndirect",value:[t._0,t._1]}:t.TAG===16?{tag:"LoadI32",value:[t._0,t._1]}:{tag:"StoreI32",value:[t._0,t._1]}:br[t]})]}),funcs:e._0[0].funcs.map(function(u){return[u[0],[u[1]._0.map(function(t){return D[t]}),u[1]._1.map(function(t){return D[t]})],[u[2][0].map(function(t){return[t[0],D[t[1]]]}),u[2][1].map(function(t){return typeof t=="object"?t.TAG===0?{tag:"ConstI32",value:t._0}:t.TAG===1?{tag:"ConstI64",value:t._0}:t.TAG===2?{tag:"ConstF32",value:t._0}:t.TAG===3?{tag:"ConstF64",value:t._0}:t.TAG===4?{tag:"If",value:typeof t._0=="object"?t._0.TAG===0?{tag:"TypeValue",value:D[t._0._0]}:{tag:"TypeIndex",value:[t._0._0,[t._0._1[0].map(function(i){return D[i]}),t._0._1[1].map(function(i){return D[i]})]]}:Ge[t._0]}:t.TAG===5?{tag:"BranchIf",value:t._0}:t.TAG===6?{tag:"Branch",value:t._0}:t.TAG===7?{tag:"Block",value:typeof t._0=="object"?t._0.TAG===0?{tag:"TypeValue",value:D[t._0._0]}:{tag:"TypeIndex",value:[t._0._0,[t._0._1[0].map(function(i){return D[i]}),t._0._1[1].map(function(i){return D[i]})]]}:Ge[t._0]}:t.TAG===8?{tag:"Loop",value:typeof t._0=="object"?t._0.TAG===0?{tag:"TypeValue",value:D[t._0._0]}:{tag:"TypeIndex",value:[t._0._0,[t._0._1[0].map(function(i){return D[i]}),t._0._1[1].map(function(i){return D[i]})]]}:Ge[t._0]}:t.TAG===9?{tag:"GetGlobal",value:t._0}:t.TAG===10?{tag:"SetGlobal",value:t._0}:t.TAG===11?{tag:"GetLocal",value:t._0}:t.TAG===12?{tag:"SetLocal",value:t._0}:t.TAG===13?{tag:"TeeLocal",value:t._0}:t.TAG===14?{tag:"Call",value:t._0}:t.TAG===15?{tag:"CallIndirect",value:[t._0,t._1]}:t.TAG===16?{tag:"LoadI32",value:[t._0,t._1]}:{tag:"StoreI32",value:[t._0,t._1]}:br[t]})]]})},e._0[1]]}:{tag:"Error",value:e._0}};var $f=`
let SIZEOF_U32 = 4;

struct Array {
  start: Ptr<u32>,
  mut length: u32,
}

impl Array {
  fn read(self, n) unsafe {
    *(((self.start as u32) + n * SIZEOF_U32) as Ptr<u32>)
  }

  fn write(mut self, n, val) unsafe {
    *(((self.start as u32) + n * SIZEOF_U32) as Ptr<u32>) = val;
  }

  fn push(mut self, val) {
    self.write(self.length, val);
    self.length += 1;
  }
}

struct Sieve {
  mut primes: Array,
  mut current: u32
}

impl Sieve {
  fn clear(mut self) {
    self.primes.length = 0;
    // 2 is the first prime
    self.primes.push(2);
    self.current = 1;
  }

  fn isPrime(mut self, n) {
    mut i = 0;
    mut p = self.primes.read(i);

    while p * p <= n {
      if n % p == 0 { return false; }
      i += 1;
      p = self.primes.read(i);
    }

    // n is prime
    // add it to the sieve
    self.primes.push(n);

    true
  }

  fn nextPrime(mut self) {
    self.current += 2;

    while !self.isPrime(self.current) {
      self.current += 2;
    }

    self.current
  }

  // count the prime numbers <= m
  fn countUpTo(mut self, m) {
    self.clear();

    while self.current <= m {
      self.nextPrime();
    }

    self.primes.length - 1
  }
}

// right after the shadow stack
let PRIMES_START = 64 * 1024;

fn main() {
  mut sieve = Sieve {
    primes: Array {
      start: PRIMES_START as Ptr<u32>,
      length: 0
    },
    current: 0
  };

  sieve.countUpTo(1000000)
}`,Cf=`
fn fact(n) {
  if n == 0 {
    1
  } else {
    n * fact(n - 1)
  }
}

fn main() {
  fact(11)
}`,Uf=`
fn fib(n) {
  let fib_aux = (n, a, b) -> {
    if n == 0 { return a; }
    if n == 1 { return b; }
    fib_aux(n - 1, b, a + b)
  };

  fib_aux(n, 0, 1)
}

fn main() {
  fib(83)
}`,Of=`
let SIZEOF_U32 = 4;

fn read_u32(addr) unsafe {
  *((addr * SIZEOF_U32) as Ptr<u32>)
}

fn write_u32(addr, val) unsafe {
  *((addr * SIZEOF_U32) as Ptr<u32>) = val;
}

fn main() {
  let square = n -> n * n;

  mut i = 0;
  while i < 100 {
    write_u32(i, square(i));
    i += 1;
  }

  read_u32(42) // 1764
}`,Mf=`
fn isEven(n) {
  n & 1 == 0
}

fn isPrime(n) {
  if n < 2 { return false; }
  if n == 2 { return true; }
  if isEven(n) { return false; }

  mut i = 3;

  while i * i <= n {
    if n % i == 0 { return false; }
    i += 2;
  }

  true
}

fn countPrimesLessThan(m) {
  mut i = m;
  mut count = 0;

  while i > 1 {
    if isPrime(i) {
      count += 1;
    }

    i -= 1;
  }

  count
}

fn main() {
  countPrimesLessThan(1000000)
}`,Xf=`
struct MinMax {
  mut min: u32,
  mut max: u32
}

impl MinMax {
  fn reset(mut self) {
    self.min = 0;
    self.max = 0;
  }

  fn resetStatic(mut m) {
    m.reset();
  }
}

fn main() {
  mut m = MinMax {
    min: 17,
    max: 22
  };

  MinMax.resetStatic(m);
  
  m.min + m.max == 0
}`,zf=`
fn main() {
  let twice = (f, x) -> f(f(x));
  
  twice(n -> n * n, 7)
}`,Vf=`
struct BumpAllocator {
  mut head: u32
}

impl BumpAllocator {
  fn allocate(mut self, bytes) {
    let addr = self.head as Ptr<u32>;
    self.head = self.head + bytes;
    addr
  }
  
  // do nothing!
  fn free(mut self, addr) { }
}

mut allocator = BumpAllocator { head: 64 * 1024 };

let SIZEOF_U32 = 4;

struct Vec {
  mut start: Ptr<u32>,
  mut length: u32,
  mut capacity: u32 
}

impl Vec {
  fn read(self, index) unsafe {
    *(((self.start as u32) + (index * SIZEOF_U32)) as Ptr<u32>)
  }

  fn write(mut self, index, value) unsafe {
    *(((self.start as u32) + (index * SIZEOF_U32)) as Ptr<u32>) = value;
  }

  fn grow(mut self) unsafe {
    let newCap = if self.capacity == 0 { 8 } else { self.capacity * 2 };
    let newStart = allocator.allocate(newCap * SIZEOF_U32);

    // copy the data from the old array to the new one
    mut i = 0;
    while i < self.length {
      *(((newStart as u32) + (i * SIZEOF_U32)) as Ptr<u32>) = self.read(i);
      i += 1;
    }

    allocator.free(self.start);
    self.start = newStart;
    self.capacity = newCap;
  }

  fn push(mut self, val) {
    if self.length + 1 > self.capacity {
      self.grow();
    }

    self.write(self.length, val);
    self.length += 1;
  }

  fn pop(mut self) {
    if self.length > 0 {
      self.length -= 1;
      self.read(self.length)
    } else {
      // until we have Option<T>
      4294967295 // -1
    }
  }
}

fn main() {
  mut vec = Vec {
    start: 0 as Ptr<u32>,
    length: 0,
    capacity: 0
  };

  mut i = 0;
  while i < 1000 {
    vec.push(i);
    i += 1;
  }

  (vec.length, vec.capacity, vec.read(723))
}`,Pf=`
let SIZEOF_U32 = 4;

struct Array {
  start: Ptr<u32>,
  mut length: u32,
}

impl Array {
  fn read(self, n) unsafe {
    *(((self.start as u32) + n * SIZEOF_U32) as Ptr<u32>)
  }

  fn write(mut self, n, val) unsafe {
    *(((self.start as u32) + n * SIZEOF_U32) as Ptr<u32>) = val;
  }

  fn push(mut self, val) {
    self.write(self.length, val);
    self.length += 1;
  }
}

fn isEven(n) {
  n & 1 == 0
}

fn nextCollatz(n) {
  if isEven(n) { n / 2 } else { 3 * n + 1 }
}

fn collatzLen(mut lens, n) {
  let memo = lens.read(n);
  if memo != 0 {
    memo
  } else {
    let len = collatzLen(lens, nextCollatz(n)) + 1;
    lens.write(n, len);
    len
  }
}

fn pb14() {
  // right after the shadow stack
  let COLLATZ_START = 64 * 1024 as Ptr<u32>;
  mut collatzLengths = Array {
    start: COLLATZ_START,
    length: 1000000,
  };

  collatzLengths.write(1, 1);

  mut longest = 0;
  mut longestIndex = 0;

  mut i = 1;
  while i <= 1000000 {
    let len = collatzLen(collatzLengths, i);
    if len > longest {
      longest = len;
      longestIndex = i;
    }

    i += 1;
  }
  
  (longest, longestIndex)
}

fn main() {
  pb14()
}`,Bf=`
fn digitsSquareSum(n) {
  let square = n -> n * n;
  mut sum = 0;

  while n > 0 {
    sum += square(n % 10);
    n /= 10;
  }

  sum
}

fn reaches89(n) {
  while n != 1 {
    if n == 89 { return true; }
    n = digitsSquareSum(n);
  }

  false
}

fn main() {
  mut i = 1;
  mut count = 0;
  while i < 10000000 {
    if reaches89(i) {
      count += 1;
    }

    i += 1;
  }

  count
}`,qf=`
extern fn log(n: u32) -> ();
extern fn expectEqual(value: u32, expected: u32) -> ();

fn main() {
  mut i = 0;
  
  while i <= 10 {
    expectEqual(i, i);
    i += 1;
  }
}`;const jf={"Prime sieve":$f,Factorial:Cf,Fibonacci:Uf,Pointers:Of,Primes:Mf,Structs:Xf,"Lambda (kind of)":zf,Vector:Vf,"External functions":qf,"Project Euler 14":Pf,"Project Euler 92":Bf},Zf=async n=>{const e=await WebAssembly.compile(n),r=await WebAssembly.instantiate(e,{index:{log:console.log,expectEqual:(u,a)=>{if(u!==a)throw new Error(`[expectEqual] expected ${u}, got: ${a}`)}}});return"main"in r.exports?r.exports.main():"Error: main function not found, exported functions are: "+Object.keys(r.exports).join(", ")},Wf={Run:async(n,e)=>{e("running...");try{const r=Wa(n);if(r.tag==="Ok"){const u=await Zf(r.value[1]);e(`${u}`)}else e(r.value)}catch(r){e(`${r}`)}},Disassemble:(n,e)=>{try{const r=Wa(n);if(r.tag==="Ok"){const[u]=r.value;e(Hi(u))}else e(r.value)}catch(r){e(`${r}`)}}},Jf=()=>kt.createElement(ko,{actions:Wf,samples:jf,aceMode:"rust"});Fo.render(kt.createElement(kt.StrictMode,null,kt.createElement(Jf,null)),document.getElementById("root"));
